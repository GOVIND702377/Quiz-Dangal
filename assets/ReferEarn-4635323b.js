import{a as F,n as O,e as W,j as e,I as E,B as j,s as q}from"./index-7688d1eb.js";import{r as m}from"./react-63c462fe.js";import{S as G}from"./SEO-1f7224dc.js";import{g as Y}from"./avatar-f7735036.js";import{G as H,C as v,d as I,aa as L,a6 as P,h as J,L as K}from"./icons-590232b1.js";import"./supabase-07ebd5d8.js";import"./router-10fed1f4.js";const re=()=>{const{user:h,userProfile:o}=F(),[k,N]=m.useState({total:0,earnings:0}),[g,_]=m.useState([]),[C,b]=m.useState(""),[T,R]=m.useState(!0),D=o!=null&&o.referral_code?o.referral_code:h!=null&&h.id?h.id.replace(/-/g,"").slice(0,8).toUpperCase():"",c=O((o==null?void 0:o.referral_code)||D),w=`https://quizdangal.com/?ref=${c}`,A=m.useMemo(()=>`Yo! 🤩 Ab dimaag se paisa banao 💸
Join Quiz Dangal – jaha brains = fame ✨

👉 बस नीचे दिए लिंक पर जाओ
Referral Code: ${c} डालो
और turant coins kamao 🚀

Don’t scroll, hustle smartly 💯

Referral Link:
${w}`,[c,w]),U={"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"Refer & Earn ka bonus kab milta hai?",acceptedAnswer:{"@type":"Answer",text:"Jaise hi aapka refer kiya hua friend sign up karke eligible quizzes complete karta hai, dono ko bonus coins milte hain. System fraud detection ke saath automatic credit karta hai."}},{"@type":"Question",name:"Referral code kaise share karein?",acceptedAnswer:{"@type":"Answer",text:"Profile section me aapka code milta hai. Link ya code WhatsApp, Telegram ya kisi bhi social app par share karein. Friends ko invite caption bhi isi page par diya gaya hai."}},{"@type":"Question",name:"Kya ek user multiple referral codes use kar sakta hai?",acceptedAnswer:{"@type":"Answer",text:"Nahi, har user sign-up ke waqt sirf ek referral code use kar sakta hai. Yeh rule spam ko rokne aur fair play ensure karne ke liye hai."}}]};m.useEffect(()=>{let a=!0;return(async()=>{if(h){R(!0);try{const{data:l,error:s}=await q.from("referrals").select("id, referred_id, coins_awarded, created_at, referral_code").eq("referrer_id",h.id).order("created_at",{ascending:!1}).limit(100);if(s&&s.code!=="PGRST116")throw s;if(!a)return;let i=l||[];if(i.length){const r=Array.from(new Set(i.map(n=>n.referred_id).filter(Boolean)));if(r.length){const{data:n,error:p}=await q.rpc("profiles_public_by_ids",{p_ids:r});p&&console.warn("Referral profile lookup failed:",p);const u=n||[],z=new Map(u.map(d=>[d.id,d])),M=await Y(u.map(d=>d.avatar_url).filter(Boolean));i=i.map(d=>{const y=z.get(d.referred_id);if(!y)return{...d,referred:null};const B=y.avatar_url&&M.get(y.avatar_url)||"";return{...d,referred:{...y,avatar_url:B}}})}}const x=i.length,f=i.reduce((r,n)=>r+(Number(n.coins_awarded)||0),0);N({total:x,earnings:f}),_(i)}catch(l){if(!a)return;N({total:0,earnings:0}),_([])}finally{a&&R(!1)}}})(),()=>{a=!1}},[h]);const S=async(a,t)=>{try{await navigator.clipboard.writeText(a),b(t),setTimeout(()=>b(""),1600)}catch(l){const s=document.createElement("textarea");s.value=a,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),b(t),setTimeout(()=>b(""),1600)}},$=async()=>{const a=A;try{if(navigator.share){await navigator.share({title:"Quiz Dangal",text:a});return}}catch(t){}try{const t=encodeURIComponent(a),l=navigator.userAgent||"",s=/Android/i.test(l),i=/iPhone|iPad|iPod/i.test(l),x=`whatsapp://send?text=${t}`,f=`intent://send?text=${t}#Intent;scheme=whatsapp;package=com.whatsapp;end`,r=`https://wa.me/?text=${t}`,n=u=>!!window.open(u,"_blank");if(s){if(n(x))return;window.location.href=f,setTimeout(()=>{document.hidden||(window.location.href=r)},700);return}if(i){window.location.href=x,setTimeout(()=>{document.hidden||(window.location.href=r)},700);return}if(n(r))return;const p=`https://t.me/share/url?text=${encodeURIComponent(a)}`;n(p)}catch(t){}},Q=async()=>{try{const t=encodeURIComponent(A),l=navigator.userAgent||"",s=/Android/i.test(l),i=/iPhone|iPad|iPod/i.test(l),x=`whatsapp://send?text=${t}`,f=`intent://send?text=${t}#Intent;scheme=whatsapp;package=com.whatsapp;end`,r=`https://wa.me/?text=${t}`,n=p=>!!window.open(p,"_blank");if(s){if(n(x))return;window.location.href=f,setTimeout(()=>{document.hidden||(window.location.href=r)},700);return}if(i){window.location.href=x,setTimeout(()=>{document.hidden||(window.location.href=r)},700);return}n(r)}catch(a){}};return m.useEffect(()=>{c&&W(c)},[c]),m.useEffect(()=>{o&&N(a=>{var t;return{total:Math.max(Number((t=o.referral_count)!=null?t:0),a.total||0),earnings:a.earnings}})},[o]),e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Refer & Earn – Quiz Dangal | Invite Friends, Get Coins",description:"Share your unique referral link on Quiz Dangal and earn bonus coins when friends join and play opinion-based quizzes.",canonical:"https://quizdangal.com/refer",robots:"noindex, nofollow",image:"https://quizdangal.com/refer-earn-poster.png?v=1",imageAlt:"Quiz Dangal Refer and Earn poster",keywords:["refer and earn","quizdangal refer","invite friends quiz app","earn coins by referral","quiz app referral India"],jsonLd:[U]}),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-2xl text-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(H,{className:"w-6 h-6 text-emerald-300"}),e.jsx("h1",{className:"text-2xl font-extrabold bg-gradient-to-r from-sky-400 via-cyan-400 to-emerald-400 bg-clip-text text-transparent tracking-tight",children:"Refer & Earn"})]}),e.jsx("div",{className:"rounded-2xl p-4 mb-6 bg-emerald-900/25 border border-emerald-600/30 backdrop-blur-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden hd-badge-coin relative shrink-0","aria-hidden":!0,children:e.jsxs("div",{className:"hd-badge-coin-front",children:[e.jsx(v,{className:"hd-badge-coin-icon"}),e.jsx("span",{className:"hd-badge-coin-shine"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-extrabold tracking-wide",children:[e.jsx("span",{className:"text-amber-200",children:"Earn +50 coins"})," per referral"]}),e.jsx("div",{className:"text-sm text-emerald-100/90",children:"Coins are added after your friend signs up and completes their profile."})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"rounded-xl p-4 text-center bg-gradient-to-br from-sky-900/40 via-cyan-900/30 to-emerald-900/20 border border-cyan-600/40",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(I,{className:"w-4 h-4 text-cyan-300"}),e.jsx("span",{className:"text-2xl font-extrabold bg-gradient-to-r from-sky-300 via-cyan-300 to-emerald-300 bg-clip-text text-transparent",children:k.total})]}),e.jsx("p",{className:"text-xs sm:text-sm text-cyan-200/90 tracking-wide",children:"Friends Referred"})]}),e.jsxs("div",{className:"rounded-xl p-4 text-center bg-gradient-to-br from-amber-900/30 via-yellow-900/20 to-transparent border border-amber-600/40",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("span",{className:"relative inline-flex w-6 h-6 align-middle rounded-full overflow-hidden hd-badge-coin shrink-0",children:e.jsxs("span",{className:"hd-badge-coin-front",children:[e.jsx(v,{className:"hd-badge-coin-icon"}),e.jsx("span",{className:"hd-badge-coin-shine"})]})}),e.jsx("span",{className:"text-2xl font-extrabold bg-gradient-to-r from-amber-200 via-yellow-200 to-orange-200 bg-clip-text text-transparent",children:k.earnings})]}),e.jsx("p",{className:"text-xs sm:text-sm text-amber-200/90 tracking-wide",children:"Coins Earned"})]})]}),e.jsxs("div",{className:"space-y-2 mb-5",children:[e.jsx("h3",{className:"font-semibold text-slate-200",children:"Your Referral Code"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{value:c,readOnly:!0,className:"font-mono text-center text-lg font-bold bg-slate-900/60 border-slate-700/60 text-slate-100"}),e.jsx(j,{onClick:()=>S(c,"code"),variant:"outline",size:"sm",className:"px-3 border-cyan-500/50 text-cyan-200 hover:bg-cyan-900/30",children:C==="code"?e.jsx(L,{className:"w-4 h-4 text-emerald-300"}):e.jsx(P,{className:"w-4 h-4 text-cyan-300"})})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("h3",{className:"font-semibold text-slate-200",children:"Your Referral Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{value:w,readOnly:!0,className:"text-sm bg-slate-900/60 border-slate-700/60 text-slate-100"}),e.jsx(j,{onClick:()=>S(w,"link"),variant:"outline",size:"sm",className:"px-3 border-cyan-500/50 text-cyan-200 hover:bg-cyan-900/30",children:C==="link"?e.jsx(L,{className:"w-4 h-4 text-emerald-300"}):e.jsx(P,{className:"w-4 h-4 text-cyan-300"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[e.jsxs(j,{onClick:$,className:"col-span-1 inline-flex items-center justify-center gap-2 h-12 px-3 rounded-lg text-sm font-extrabold bg-gradient-to-r from-indigo-500 via-violet-500 to-fuchsia-500 hover:opacity-90 border border-indigo-400/40 w-full",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:"Share"})]}),e.jsxs(j,{onClick:Q,className:"col-span-1 inline-flex items-center justify-center gap-2 h-12 px-2.5 rounded-lg text-[13px] sm:text-sm font-extrabold border text-white shadow-[0_8px_18px_rgba(34,197,94,0.35)] hover:shadow-[0_12px_24px_rgba(34,197,94,0.5)] border-emerald-500/50 bg-[linear-gradient(90deg,#16a34a,#22c55e,#10b981)] w-full",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"currentColor",d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.272-.099-.471-.148-.67.149-.198.297-.768.966-.941 1.164-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.149-.173.198-.297.297-.495.099-.198.05-.372-.025-.521-.074-.149-.669-1.611-.916-2.205-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.521.074-.793.372s-1.042 1.016-1.042 2.479 1.067 2.876 1.219 3.074c.149.198 2.1 3.2 5.077 4.487.709.306 1.262.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.718 2.007-1.41.248-.694.248-1.289.173-1.41-.074-.123-.272-.198-.57-.347m-5.49 7.485h-.004a9.867 9.867 0 01-5.031-1.378l-.361-.214-3.741.982.999-3.648-.235-.374a9.861 9.861 0 01-1.51-5.241c.001-5.45 4.434-9.884 9.885-9.884 2.641 0 5.122 1.03 6.988 2.897a9.825 9.825 0 012.897 6.994c-.003 5.45-4.436 9.884-9.887 9.884m8.413-18.297A11.815 11.815 0 0012.004 0C5.375 0 .16 5.215.157 11.844a11.82 11.82 0 001.624 5.99L0 24l6.305-1.654a11.86 11.86 0 005.68 1.448h.005c6.628 0 11.843-5.215 11.846-11.844a11.787 11.787 0 00-3.473-8.372z"})}),e.jsx("span",{className:"whitespace-nowrap",children:"WhatsApp"})]})]}),T?e.jsxs("div",{className:"text-center py-10 text-slate-300",children:[e.jsx(K,{className:"w-6 h-6 mx-auto mb-2 animate-spin text-cyan-200"}),e.jsx("p",{children:"Loading your referral stats…"})]}):g.length>0?e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsx("h3",{className:"font-semibold text-slate-200",children:"Recent Referrals"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:g.slice(0,8).map(a=>{var t;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/60 rounded-lg border border-slate-700/60",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-100",children:((t=a.referred)==null?void 0:t.username)||"New User"}),e.jsx("div",{className:"text-xs text-slate-400",children:new Date(a.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1 text-emerald-300",children:[e.jsx("span",{className:"relative inline-flex w-5 h-5 align-middle rounded-full overflow-hidden hd-badge-coin shrink-0",children:e.jsxs("span",{className:"hd-badge-coin-front",children:[e.jsx(v,{className:"hd-badge-coin-icon"}),e.jsx("span",{className:"hd-badge-coin-shine"})]})}),e.jsxs("span",{className:"font-bold",children:["+",a.coins_awarded]})]})]},a.id)})}),g.length>8&&e.jsxs("p",{className:"text-xs text-slate-400",children:["And ",g.length-8," more referrals…"]})]}):e.jsxs("div",{className:"text-center py-8 text-slate-400 mt-6",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-2 text-slate-500"}),e.jsx("p",{className:"text-slate-200",children:"No referrals yet"}),e.jsx("p",{className:"text-sm",children:"Start sharing your link to earn coins!"})]})]})})]})};export{re as default};

import{a as ae,u as re,h as b,s as c,j as e,D as ie,p as le,q as ne,r as de,t as oe,v as ce,B as O}from"./index-2525ac80.js";import{r as l}from"./react-8a702e3e.js";import{L as me}from"./router-f2cf3f51.js";import{m as p,AnimatePresence as xe}from"./motion-f69b6c08.js";import{a2 as he,S as _,a0 as ge,G as S,a3 as ue,C as Y,a4 as be,a5 as pe,W as fe,L as we,a6 as H,e as Q,a7 as ve}from"./icons-52d1b41a.js";import"./supabase-4c1332f7.js";function Ce(){const{user:h,userProfile:g,refreshUserProfile:T}=ae(),{toast:f}=re(),[m,w]=l.useState([]),[V,v]=l.useState(!0),[E,k]=l.useState([]),[W,C]=l.useState(!0),[R,z]=l.useState(""),[L,G]=l.useState("all"),[n,K]=l.useState(null),[X,q]=l.useState(!1),[J,M]=l.useState("confirm"),[I,U]=l.useState(!1),[j,Z]=l.useState("rewards"),[P]=l.useState(""),[$]=l.useState("newest"),B=l.useCallback(t=>{var a,r,d;if(!t)return"";const s=(d=(r=(a=t.reward_value)!=null?a:t.value)!=null?r:t.amount)!=null?d:"";return s==null?"":String(s).trim()},[]),A=l.useCallback(async()=>{if(!h||!b||!c){w([]),v(!1);return}v(!0);try{const{data:t,error:s}=await c.from("redemptions").select("*").eq("user_id",h.id).order("requested_at",{ascending:!1});if(s){console.error("Failed to fetch redemptions history",s),w([]);return}w(t||[])}catch(t){console.error("Unexpected error while fetching redemptions history",t),w([])}finally{v(!1)}},[h,b,c]);l.useEffect(()=>{if(!h||!b||!c){w([]),v(!1);return}const t=async()=>{await A()};t();const s=setInterval(t,15e3);return()=>{clearInterval(s)}},[h,b,c,A]),l.useEffect(()=>{async function t(){if(!b||!c){k([]),C(!1);return}C(!0);const s=await c.from("reward_catalog").select("*").eq("is_active",!0).order("coins_required",{ascending:!0}).order("id",{ascending:!1});s.error?k([]):k(s.data||[]),C(!1)}t()},[]);const x=l.useMemo(()=>Number((g==null?void 0:g.wallet_balance)||0),[g]),N=l.useMemo(()=>{const t=R.trim().toLowerCase(),s=1e3*60*60*24*14,a=Date.now();return(E||[]).filter(r=>{const d=String(r.title||r.reward_type||"").toLowerCase(),i=String(r.description||"").toLowerCase(),o=t?d.includes(t)||i.includes(t):!0,u=r.created_at?new Date(r.created_at).getTime():0,D=u&&a-u<=s;return L==="new"?o&&D:o})},[E,R,L]),F=l.useMemo(()=>{const t=P.trim().toLowerCase();let s=m||[];return t&&(s=s.filter(a=>String(a.reward_type||"").toLowerCase().includes(t)||String(a.reward_value||"").toLowerCase().includes(t)||String(a.status||"").toLowerCase().includes(t))),s=[...s].sort((a,r)=>{const d=a.requested_at?new Date(a.requested_at).getTime():0,i=r.requested_at?new Date(r.requested_at).getTime():0;return $==="oldest"?d-i:i-d}),s},[m,P,$]),y=l.useMemo(()=>{const t=m.length,s=m.filter(i=>i.status==="pending").length,a=m.filter(i=>i.status==="approved").length,r=m.filter(i=>i.status==="rejected").length,d=m.reduce((i,o)=>i+Number(o.coins_required||0),0);return{total:t,pending:s,approved:a,rejected:r,coinsUsed:d}},[m]),ee=t=>{const s=String(t||"").toLowerCase();return s==="approved"?{label:"Approved",className:"bg-emerald-500/15 text-emerald-300 border-emerald-400/30",icon:H,rowAccent:"border-l-2 border-emerald-400/60"}:s==="pending"?{label:"Pending",className:"bg-amber-500/15 text-amber-200 border-amber-300/30",icon:Q,rowAccent:"border-l-2 border-amber-400/60"}:s==="rejected"?{label:"Rejected",className:"bg-rose-500/15 text-rose-200 border-rose-300/30",icon:ve,rowAccent:"border-l-2 border-rose-400/60"}:{label:"Unknown",className:"bg-slate-500/15 text-slate-200 border-slate-300/30",icon:Q,rowAccent:"border-l-2 border-slate-400/50"}},te=t=>{K(t),M("confirm"),q(!0)},se=async()=>{var s,a,r,d;if(!n||!h)return;if(!b||!c){f({title:"Configuration missing",description:"Supabase env vars are not set. Please configure .env.local",variant:"destructive"});return}const t=Number((r=(a=(s=n.coins_required)!=null?s:n.coin_cost)!=null?a:n.coins)!=null?r:0);if(((d=g==null?void 0:g.wallet_balance)!=null?d:0)<t){f({title:"Not enough coins",description:"Earn more coins to redeem this reward."});return}try{U(!0);const{error:i}=await c.rpc("redeem_from_catalog",{p_catalog_id:n.id});if(i)throw i;M("success"),f({title:"Reward granted",description:"Congratulations! Your reward has been issued instantly."}),await A(),typeof T=="function"&&await T(h).catch(()=>{})}catch(i){const o=(i==null?void 0:i.message)||"Please try again later";f({title:"Something went wrong",description:o,variant:"destructive"})}finally{U(!1)}};return e.jsxs("div",{className:"relative mx-auto max-w-5xl px-4 py-6",children:[e.jsx("div",{className:"absolute inset-0 -z-10 opacity-70 mix-blend-screen [background-image:radial-gradient(circle_at_18%_28%,rgba(56,189,248,0.25),rgba(0,0,0,0)60%),radial-gradient(circle_at_82%_72%,rgba(192,132,252,0.22),rgba(0,0,0,0)65%),radial-gradient(circle_at_50%_50%,rgba(244,114,182,0.15),rgba(0,0,0,0)55%)]"}),e.jsx("div",{className:"mb-6",children:e.jsxs(p.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.45},className:"flex items-center gap-3",children:[e.jsx(p.div,{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 grid place-items-center ring-2 ring-white/30 shadow-xl",animate:{y:[0,-2,0]},transition:{repeat:1/0,duration:4,ease:"easeInOut"},children:e.jsx(he,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold bg-gradient-to-r from-indigo-200 via-fuchsia-200 to-pink-200 bg-clip-text text-transparent tracking-tight",children:"Redemptions"}),e.jsx("div",{className:"mt-0.5 h-[2px] w-24 bg-gradient-to-r from-indigo-400/60 via-fuchsia-400/60 to-pink-400/60 rounded-full"}),e.jsx("p",{className:"text-slate-300/80 text-sm mt-1",children:"Track your reward requests"})]})]})}),!b&&e.jsx("div",{className:"mb-4 rounded-xl border border-amber-300/30 bg-amber-500/10 p-3 text-amber-100 text-sm",children:"Supabase configuration missing. Create a .env.local file with VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to enable redemptions and history."}),e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[[{key:"rewards",label:"Rewards"},{key:"history",label:"History"}].map(t=>e.jsx("button",{onClick:()=>Z(t.key),className:`px-3 py-1.5 rounded-xl text-xs font-semibold border transition ${j===t.key?"bg-white/10 text-white border-white/20 shadow hover:bg-white/15":"bg-white/5 text-slate-200/90 border-white/10 hover:bg-white/10 hover:border-white/20"}`,children:t.label},t.key)),e.jsx("div",{className:"ml-auto"})]}),j==="rewards"&&e.jsx(p.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05},className:"relative rounded-3xl p-[1px] bg-[radial-gradient(1200px_600px_at_10%_-10%,rgba(99,102,241,0.25),transparent_60%),radial-gradient(1200px_600px_at_90%_110%,rgba(217,70,239,0.22),transparent_60%)] mb-6",children:e.jsxs("div",{className:"qd-card rounded-3xl p-5 shadow-xl border border-white/10 bg-white/[0.03] backdrop-blur-xl",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"inline-flex w-9 h-9 rounded-xl bg-gradient-to-br from-fuchsia-500/25 to-indigo-500/25 border border-white/10 items-center justify-center",children:e.jsx(_,{className:"w-4.5 h-4.5 text-fuchsia-200"})}),e.jsx("h2",{className:"text-lg md:text-xl font-bold text-slate-100",children:"Available Rewards"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{value:R,onChange:t=>z(t.target.value),placeholder:"Search rewards...",className:"w-full sm:w-64 pl-9 pr-3 py-2 rounded-xl bg-white/5 border border-white/10 text-sm text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-400/50 focus:border-indigo-400/40"})]}),e.jsx("div",{className:"flex items-center gap-1.5",children:[{key:"all",label:"All"},{key:"new",label:"New"}].map(t=>e.jsx("button",{onClick:()=>G(t.key),className:`px-3 py-1.5 rounded-xl text-xs font-semibold border transition ${L===t.key?"bg-white/10 text-white border-white/20 shadow hover:bg-white/15":"bg-white/5 text-slate-200/90 border-white/10 hover:bg-white/10 hover:border-white/20"}`,children:t.label},t.key))})]})]}),W?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[...Array(6)].map((t,s)=>e.jsx("div",{className:"rounded-2xl p-[1px] bg-gradient-to-br from-indigo-500/30 via-fuchsia-500/20 to-violet-500/30",children:e.jsx("div",{className:"rounded-2xl p-3 bg-slate-900/50 border border-white/10",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-24 rounded-xl bg-slate-700/40"}),e.jsx("div",{className:"h-3 rounded bg-slate-700/40 w-3/4"}),e.jsx("div",{className:"h-2.5 rounded bg-slate-700/40 w-1/2"}),e.jsx("div",{className:"h-8 rounded-lg bg-slate-700/40 w-full"})]})})},s))}):((N==null?void 0:N.length)||0)===0?e.jsx("div",{className:"text-center py-8 text-slate-300",children:"No rewards found. Try a different search or filter."}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:N.map(t=>{var i,o,u;const s=Number((u=(o=(i=t.coins_required)!=null?i:t.coin_cost)!=null?o:t.coins)!=null?u:0),a=B(t),r=x>=s;t.created_at&&new Date(t.created_at).getTime();const d=s>0?Math.max(0,Math.min(100,Math.floor(x/s*100))):0;return e.jsxs(p.div,{className:"group relative rounded-2xl p-3.5 bg-white/[0.05] border border-white/10 shadow-lg backdrop-blur-xl overflow-hidden",whileHover:{y:-3,scale:1.01},transition:{type:"spring",stiffness:300,damping:20},children:[e.jsx("div",{className:"relative rounded-xl p-[2px] bg-gradient-to-br from-indigo-500/30 via-fuchsia-500/20 to-violet-500/30",children:e.jsxs("div",{className:"relative rounded-[10px] h-32 overflow-hidden bg-black/25",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.title||"Reward",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:D=>{D.currentTarget.style.display="none"}}):e.jsx("div",{className:"absolute inset-0 grid place-items-center",children:e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 ring-2 ring-white/20 shadow-lg grid place-items-center",children:e.jsx(S,{className:"w-8 h-8 text-white/95"})})}),e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[radial-gradient(500px_120px_at_20%_-20%,rgba(255,255,255,0.18),transparent),radial-gradient(500px_120px_at_80%_120%,rgba(255,255,255,0.12),transparent)]"})]})}),e.jsxs("div",{className:"mt-3 text-center",children:[a&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 bg-white/10 border border-white/15 backdrop-blur-sm shadow-sm",title:a,children:[e.jsx(_,{className:"w-4 h-4 text-fuchsia-200"}),e.jsx("span",{className:"text-white font-bold text-base sm:text-lg tracking-tight",children:a})]}),t.title&&e.jsx("div",{className:"text-sm font-semibold text-slate-200/90 truncate mt-1",children:t.title}),e.jsxs("div",{className:"mt-2 text-xs text-indigo-200/90 font-medium",children:["Requires ",e.jsx("span",{className:"font-bold text-indigo-100",children:s.toLocaleString()})," coins"]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"h-1.5 w-full rounded-full bg-white/10 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500",style:{width:`${d}%`}})}),e.jsxs("button",{type:"button",disabled:!r,className:`mt-3 w-full inline-flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-semibold border transition focus:outline-none focus:ring-2 focus:ring-indigo-400/40 ${r?"bg-gradient-to-r from-indigo-600/85 to-fuchsia-600/85 text-white border-white/10 hover:from-indigo-600 hover:to-fuchsia-600 shadow-md hover:shadow-lg active:scale-[0.99]":"bg-white/5 text-slate-300/70 border-white/10 cursor-not-allowed"}`,onClick:()=>te(t),title:r?"Redeem reward":"Not enough coins",children:["Redeem ",e.jsx(ue,{className:"w-4 h-4"})]}),!r&&e.jsxs("div",{className:"mt-1.5 text-center text-[10px] text-slate-400/90",children:["Need ",e.jsx("span",{className:"text-rose-200 font-semibold",children:Math.max(0,s-x).toLocaleString()})," more coins."," ",e.jsx(me,{to:"/refer",className:"text-indigo-300 hover:underline",children:"Earn"})]})]})]},t.id)})})]})}),j==="rewards"&&e.jsxs("div",{className:"rounded-3xl p-5 md:p-6 bg-white/[0.035] backdrop-blur-xl border border-white/10 shadow-2xl mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"pointer-events-none absolute -inset-px opacity-[0.06] bg-[radial-gradient(600px_200px_at_10%_-20%,#6366f1,transparent),radial-gradient(500px_200px_at_90%_120%,#e879f9,transparent)]"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"rounded-2xl p-3.5 bg-indigo-500/10 border border-indigo-300/25",children:[e.jsx("div",{className:"text-[11px] font-semibold text-indigo-200/90",children:"Total Requests"}),e.jsx("div",{className:"mt-1 text-xl font-extrabold text-indigo-200",children:y.total})]}),e.jsxs("div",{className:"rounded-2xl p-3.5 bg-amber-500/10 border border-amber-300/25",children:[e.jsx("div",{className:"text-[11px] font-semibold text-amber-200/90",children:"Pending"}),e.jsx("div",{className:"mt-1 text-xl font-extrabold text-amber-200",children:y.pending})]}),e.jsxs("div",{className:"rounded-2xl p-3.5 bg-emerald-500/10 border border-emerald-300/25",children:[e.jsx("div",{className:"text-[11px] font-semibold text-emerald-200/90",children:"Approved"}),e.jsx("div",{className:"mt-1 text-xl font-extrabold text-emerald-200",children:y.approved})]}),e.jsxs("div",{className:"rounded-2xl p-3.5 bg-fuchsia-500/10 border border-fuchsia-300/25",children:[e.jsxs("div",{className:"text-[11px] font-semibold text-fuchsia-200/90 inline-flex items-center gap-1",children:[e.jsx(Y,{className:"w-3.5 h-3.5"})," Coins Used"]}),e.jsx("div",{className:"mt-1 text-xl font-extrabold text-fuchsia-200",children:Number(y.coinsUsed||0).toLocaleString()})]})]})]}),j==="history"&&e.jsx("div",{className:"qd-card rounded-3xl p-5 shadow-xl border border-white/10 bg-white/[0.02] backdrop-blur-xl",children:V?e.jsx("div",{className:"space-y-3",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"p-3 rounded-xl bg-indigo-900/30 border border-indigo-700/40",children:e.jsxs("div",{className:"animate-pulse flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 w-2/3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-800/40"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-indigo-800/40 rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-2.5 bg-indigo-800/40 rounded w-1/3"})]})]}),e.jsx("div",{className:"h-3 w-20 bg-indigo-800/40 rounded"})]})},s))}):F.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 text-white shadow-md mb-3",children:e.jsx(S,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-slate-200 font-semibold",children:"No redemptions yet"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Make a request and it will appear here."})]}):e.jsx("div",{className:"space-y-3",children:F.map(t=>{const s=ee(t.status),a=s.icon;return e.jsx(p.div,{className:`p-3 sm:p-3.5 rounded-xl bg-indigo-900/30 border border-indigo-700/40 hover:border-indigo-400/50 transition hover:shadow-lg ${s.rowAccent}`,whileHover:{y:-2},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-start sm:items-center gap-3 min-w-0",children:[e.jsx("div",{className:"relative w-10 h-10 rounded-xl grid place-items-center bg-gradient-to-br from-violet-500 to-fuchsia-500 ring-2 ring-white/20 flex-shrink-0",children:e.jsx(S,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-lg px-2.5 py-1 bg-white/5 border border-white/10 backdrop-blur-sm shadow-sm",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-fuchsia-200"}),e.jsx("span",{className:"text-slate-100 font-semibold text-sm truncate max-w-[200px] sm:max-w-[280px]",children:t.reward_value})]}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-400/80 font-mono truncate",children:t.requested_at?new Date(t.requested_at).toLocaleString():""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full border text-xs font-semibold ${s.className} shadow`,children:[e.jsx(a,{className:"w-3.5 h-3.5"})," ",s.label]}),e.jsxs("button",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-[11px] text-slate-200 hover:bg-white/10",onClick:async()=>{try{await navigator.clipboard.writeText(String(t.id)),f({title:"Copied",description:"Redemption ID copied"})}catch(r){f({title:"Copy failed",description:"Unable to copy ID",variant:"destructive"})}},title:"Copy redemption ID",children:[e.jsx(be,{className:"w-3.5 h-3.5"})," ID"]})]})]})},t.id)})})}),e.jsx(ie,{open:X,onOpenChange:q,children:e.jsx(le,{className:"bg-slate-900/95 border-white/10 text-slate-100 rounded-xl sm:rounded-2xl p-0 overflow-hidden w-[min(94vw,600px)] sm:max-w-xl md:max-w-2xl max-h-[86svh]",children:n&&e.jsxs("div",{className:"p-4 sm:p-6 md:p-7",children:[e.jsxs(ne,{className:"text-center",children:[e.jsxs(de,{className:"text-xl sm:text-2xl flex items-center gap-2 justify-center font-extrabold",children:[e.jsx(pe,{className:"w-6 h-6 text-fuchsia-300"})," Redeem Reward"]}),e.jsx(oe,{className:"text-slate-300 text-sm sm:text-base mt-1 md:mt-1 text-center",children:"Confirm your redemption below."})]}),(()=>{var d,i,o;const t=Number((o=(i=(d=n.coins_required)!=null?d:n.coin_cost)!=null?i:n.coins)!=null?o:0),s=B(n),a=x>=t,r=Math.max(0,x-t);return e.jsxs("div",{className:"mt-4 md:mt-3 grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6 items-center",children:[e.jsx("div",{className:"sm:col-span-1 flex items-center justify-center",children:e.jsx("div",{className:"relative w-full max-w-[220px] md:max-w-[260px] rounded-2xl p-[2px] bg-gradient-to-br from-indigo-500/30 via-fuchsia-500/20 to-violet-500/30 shadow-lg",children:e.jsxs("div",{className:"relative rounded-2xl bg-slate-900/80 backdrop-blur-lg p-3 text-center overflow-hidden",children:[e.jsxs("div",{className:"relative rounded-[10px] h-32 md:h-36 overflow-hidden bg-black/25",children:[n.image_url?e.jsx("img",{src:n.image_url,alt:n.title||"Reward",className:"h-full w-full object-cover",onError:u=>{u.currentTarget.style.display="none"},loading:"lazy",decoding:"async"}):e.jsx("div",{className:"absolute inset-0 grid place-items-center",children:e.jsx("div",{className:"w-20 h-20 md:w-16 md:h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 ring-2 ring-white/20 shadow-lg grid place-items-center",children:e.jsx(S,{className:"w-10 h-10 md:w-8 md:h-8 text-white/95"})})}),e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-10 bg-[radial-gradient(500px_120px_at_20%_-20%,rgba(255,255,255,0.18),transparent),radial-gradient(500px_120px_at_80%_120%,rgba(255,255,255,0.12),transparent)]"})]}),e.jsxs("div",{className:"mt-3",children:[n.title&&e.jsx("div",{className:"text-base font-bold text-white truncate",children:n.title}),s&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 bg-white/10 border border-white/15 backdrop-blur-sm shadow-sm",children:[e.jsx(_,{className:"w-4 h-4 text-fuchsia-200"}),e.jsx("span",{className:"text-white font-bold text-base tracking-tight",children:s})]})]})]})})}),e.jsxs("div",{className:"sm:col-span-2 grid gap-3 content-start md:-mt-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/[0.04] px-3 py-2",children:[e.jsx("div",{className:"text-[11px] text-slate-400",children:"Coins required"}),e.jsxs("div",{className:"text-sm font-semibold text-fuchsia-200 inline-flex items-center gap-1.5",children:[e.jsx(Y,{className:"w-4 h-4"}),t.toLocaleString()]})]}),e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/[0.04] px-3 py-2",children:[e.jsx("div",{className:"text-[11px] text-slate-400",children:"Your balance"}),e.jsxs("div",{className:"text-sm font-semibold text-indigo-200 inline-flex items-center gap-1.5",children:[e.jsx(fe,{className:"w-4 h-4"}),x.toLocaleString()]})]})]}),e.jsx("div",{className:"text-xs text-slate-400 text-center sm:text-left",children:a?e.jsxs("span",{children:["After redeem, you'll have ",e.jsx("span",{className:"text-indigo-200 font-semibold",children:r.toLocaleString()})," coins left."]}):e.jsxs("span",{children:["You are short by ",e.jsx("span",{className:"text-rose-200 font-semibold",children:Math.max(0,t-x).toLocaleString()})," coins."]})})]})]})})(),e.jsx(ce,{className:"mt-6",children:J==="confirm"?e.jsx("div",{className:"w-full",children:(()=>{var s,a,r;const t=Number((r=(a=(s=n.coins_required)!=null?s:n.coin_cost)!=null?a:n.coins)!=null?r:0);return e.jsx(O,{onClick:se,disabled:I||x<t,className:"w-full bg-gradient-to-r from-indigo-600 to-fuchsia-600 hover:from-indigo-600 hover:to-fuchsia-600 text-base py-3 h-12",children:I?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing"]}):e.jsxs(e.Fragment,{children:["Confirm & Redeem for ",t.toLocaleString()," coins"]})})})()}):e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/10 p-4 text-emerald-100 flex items-start gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-emerald-300 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Redeemed successfully"}),e.jsx("div",{className:"text-xs opacity-80",children:"Your reward has been granted immediately."})]})]}),e.jsx(xe,{children:e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative h-0",children:[...Array(10)].map((t,s)=>e.jsx(p.span,{className:"absolute inline-block w-2 h-2 rounded-sm",style:{left:`${10+s*8}%`,top:-8,background:["#a78bfa","#f472b6","#60a5fa","#34d399","#f59e0b"][s%5]},initial:{y:-10,rotate:0,opacity:0},animate:{y:40+Math.random()*20,rotate:120+Math.random()*180,opacity:1},transition:{duration:.9,delay:s*.04,ease:"easeOut"}},s))})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(O,{onClick:()=>q(!1),variant:"brand",children:"Close"})})]})})]})})})]})}export{Ce as default};

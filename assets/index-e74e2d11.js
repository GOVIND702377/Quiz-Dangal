var Oe=Object.defineProperty;var Te=(s,t,a)=>t in s?Oe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var K=(s,t,a)=>(Te(s,typeof t!="symbol"?t+"":t,a),a);import{r as n,j as e,V as te,b as se,A as ae,C as re,X as ne,T as oe,D as ie,P as Le,S as Ce,R as le,d as ze,e as Ue,u as Ve,f as Me,H as Fe,M as qe,h as We,W as Be,U as $e,F as He,i as Qe,L as Ye,k as Ge,O as ce,l as de,m as Je,n as ue,o as me,p as Xe,q as Ke,G as Ze,s as pe,t as fe,v as he,I as xe,w as ge,x as et,y as tt,z as st,B as at,E as be,J as h,N as D,K as rt,Q as nt}from"./react-vendor-c284acb6.js";import{c as ot,_ as b}from"./supabase-97550265.js";import{v as it,w as lt,x as Q}from"./vendor-3e030596.js";import{A as ct,m as z}from"./motion-b88ded6b.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const dt="https://gcheopiqayyptfxowulv.supabase.co",ye="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdjaGVvcGlxYXl5cHRmeG93dWx2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NjE2MjMsImV4cCI6MjA2OTQzNzYyM30.mVI7HJOEOoMNMRdh6uonCub5G2ggfbGYtIti0x4aAAM",ve=!!ye,_=ve?ot(dt,ye):null,U=n.createContext(),ut=({children:s})=>{const[t,a]=n.useState(null),[o,r]=n.useState(null),[i,c]=n.useState(!0),[x,u]=n.useState(!1),d=n.useRef(!1),l="false".toLowerCase();if(l==="1"||l==="true"||l==="yes"){const m={supabase:null,user:null,userProfile:null,loading:!1,signUp:async()=>{throw new Error("Auth disabled in dev bypass")},signIn:async()=>{throw new Error("Auth disabled in dev bypass")},signOut:async()=>{},refreshUserProfile:()=>{}};return e.jsx(U.Provider,{value:m,children:s})}if(!ve){const m={supabase:null,user:null,userProfile:null,loading:!1,isRecoveryFlow:!1,hasSupabaseConfig:!1,signUp:async()=>{throw new Error("Supabase config missing")},signIn:async()=>{throw new Error("Supabase config missing")},signOut:async()=>{},refreshUserProfile:()=>{}};return e.jsx(U.Provider,{value:m,children:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-white/20 rounded-2xl p-8 max-w-lg w-full shadow-xl text-center",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3",children:"Configuration Missing"}),e.jsxs("p",{className:"text-gray-700 mb-2",children:["Create a ",e.jsx("code",{children:".env"})," file in the project root with:"]}),e.jsx("pre",{className:"text-left text-sm bg-gray-100 p-3 rounded-md overflow-auto",children:e.jsx("code",{children:"VITE_SUPABASE_URL=your_supabase_url VITE_SUPABASE_ANON_KEY=your_supabase_anon_key"})}),e.jsxs("p",{className:"text-gray-600 mt-3",children:["Or for local UI only testing set ",e.jsx("code",{children:"VITE_BYPASS_AUTH=1"})," then restart dev server."]})]})})})}const g=async m=>{var p;if(m)try{const{data:v,error:N}=await _.from("profiles").select("*").eq("id",m.id).single();if(N&&!(N.code==="PGRST116"&&((p=N.details)==null?void 0:p.includes("0 rows"))))throw N;r(v||null)}catch(v){r(null)}};n.useEffect(()=>{try{const p=new URL(window.location.href);((p.hash||"").includes("type=recovery")||new URLSearchParams(p.search).get("type")==="recovery")&&u(!0)}catch(p){}c(!0),_.auth.getSession().then(({data:{session:p}})=>{const v=p==null?void 0:p.user;a(v!=null?v:null),c(!1),v?g(v):r(null)}).catch(async()=>{try{await _.auth.signOut()}catch(p){}a(null),r(null),c(!1)});const{data:{subscription:m}}=_.auth.onAuthStateChange((p,v)=>{const N=v==null?void 0:v.user;a(N!=null?N:null),c(!1),N?g(N):r(null),p==="PASSWORD_RECOVERY"&&u(!0),p==="SIGNED_OUT"&&(a(null),r(null))});return()=>{m==null||m.unsubscribe()}},[]),n.useEffect(()=>{const m=setInterval(async()=>{try{const{data:p}=await _.auth.getSession();if(!(p!=null&&p.session)&&t){try{await _.auth.signOut()}catch(v){}a(null),r(null)}}catch(p){try{await _.auth.signOut()}catch(v){}a(null),r(null)}},6e4);return()=>clearInterval(m)},[t]),n.useEffect(()=>{var N;if(!t||i||d.current)return;d.current=!0;const p=new URLSearchParams(window.location.search).get("ref"),v={id:t.id,full_name:((N=t.user_metadata)==null?void 0:N.full_name)||"",mobile_number:""};_.from("profiles").upsert([v],{onConflict:"id"}).then(async()=>{const L=`qd_referral_processed_${t.id}`;if(!(()=>{try{return sessionStorage.getItem(L)==="1"}catch(f){return!1}})()&&p&&p!==t.id)try{await _.rpc("handle_referral_bonus",{referred_user_uuid:t.id,referrer_code:p});try{sessionStorage.setItem(L,"1")}catch(f){}}catch(f){}}).catch(()=>{}).finally(()=>{g(t)})},[t,i,o]),n.useEffect(()=>{if(o&&!o.referral_code&&t){const m=(t.id||"").replace(/-/g,"").slice(0,8);_.from("profiles").update({referral_code:m}).eq("id",t.id).then(()=>{g(t)}).catch(()=>{})}},[o,t]);const A={supabase:_,user:t,userProfile:o,loading:i,isRecoveryFlow:x,hasSupabaseConfig:!0,signUp:async(m,p)=>await _.auth.signUp({email:m,password:p}),signIn:async(m,p)=>await _.auth.signInWithPassword({email:m,password:p}),signOut:async()=>{try{await _.auth.signOut()}catch(m){}try{Object.keys(localStorage).forEach(m=>{(m.startsWith("sb-")||m.startsWith("qd_")||m.toLowerCase().includes("supabase"))&&localStorage.removeItem(m)}),sessionStorage.clear()}catch(m){}a(null),r(null);try{window.location.assign("/login")}catch(m){window.location.href="/login"}},refreshUserProfile:g};return e.jsx(U.Provider,{value:A,children:s})},T=()=>{const s=n.useContext(U);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},mt=1,pt=1e6;let W=0;function ft(){return W=(W+1)%Number.MAX_SAFE_INTEGER,W.toString()}const B=new Map,Z=s=>{if(B.has(s))return;const t=setTimeout(()=>{B.delete(s),C({type:"REMOVE_TOAST",toastId:s})},pt);B.set(s,t)},ht=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,mt)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?Z(a):s.toasts.forEach(o=>{Z(o.id)}),{...s,toasts:s.toasts.map(o=>o.id===a||a===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},V=[];let M={toasts:[]};function C(s){M=ht(M,s),V.forEach(t=>{t(M)})}function xt({...s}){const t=ft(),a=r=>C({type:"UPDATE_TOAST",toast:{...r,id:t}}),o=()=>C({type:"DISMISS_TOAST",toastId:t});return C({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:r=>{r||o()}}}),{id:t,dismiss:o,update:a}}function gt(){const[s,t]=n.useState(M);return n.useEffect(()=>(V.push(t),()=>{const a=V.indexOf(t);a>-1&&V.splice(a,1)}),[s]),{...s,toast:xt,dismiss:a=>C({type:"DISMISS_TOAST",toastId:a})}}function w(...s){return it(lt(s))}const bt=Le,je=n.forwardRef(({className:s,...t},a)=>e.jsx(te,{ref:a,className:w("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));je.displayName=te.displayName;const yt=Q("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),we=n.forwardRef(({className:s,variant:t,...a},o)=>e.jsx(se,{ref:o,className:w(yt({variant:t}),s),...a}));we.displayName=se.displayName;const vt=n.forwardRef(({className:s,...t},a)=>e.jsx(ae,{ref:a,className:w("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));vt.displayName=ae.displayName;const _e=n.forwardRef(({className:s,...t},a)=>e.jsx(re,{ref:a,className:w("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(ne,{className:"h-4 w-4"})}));_e.displayName=re.displayName;const Ne=n.forwardRef(({className:s,...t},a)=>e.jsx(oe,{ref:a,className:w("text-sm font-semibold",s),...t}));Ne.displayName=oe.displayName;const Ee=n.forwardRef(({className:s,...t},a)=>e.jsx(ie,{ref:a,className:w("text-sm opacity-90",s),...t}));Ee.displayName=ie.displayName;function jt(){const{toasts:s}=gt();return e.jsxs(bt,{children:[s.map(function({id:t,title:a,description:o,action:r,...i}){return e.jsxs(we,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(Ne,{children:a}),o&&e.jsx(Ee,{children:o})]}),r,e.jsx(_e,{})]},t)}),e.jsx(je,{})]})}const wt=Q("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:scale-105 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=n.forwardRef(({className:s,variant:t,size:a,asChild:o=!1,...r},i)=>{const c=o?Ce:"button";return e.jsx(c,{className:w(wt({variant:t,size:a,className:s})),ref:i,...r})});F.displayName="Button";class _t extends le.Component{constructor(a){super(a);K(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,o){this.setState({error:a,errorInfo:o})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-red-50 to-pink-100",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-red-200/50 rounded-2xl p-8 max-w-md w-full shadow-xl text-center",children:[e.jsx(ze,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),!1,e.jsxs(F,{onClick:this.handleReset,className:"w-full bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]})}):this.props.children}}const Nt=()=>{const s=Ve(),t=Me(),a=[{icon:Fe,label:"Home",path:"/"},{icon:qe,label:"Leaderboards",path:"/leaderboards"},{icon:We,label:"My Quizzes",path:"/my-quizzes"},{icon:Be,label:"Wallet",path:"/wallet"},{icon:$e,label:"Profile",path:"/profile"}],o=r=>{switch(r){case"/":return"text-sky-400";case"/leaderboards":return"text-amber-300";case"/my-quizzes":return"text-fuchsia-300";case"/wallet":return"text-amber-300";case"/profile":return"text-purple-400";default:return"text-sky-400"}};return e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 z-50 p-2",children:e.jsxs("div",{className:"qd-glass-soft rounded-3xl mx-1 sm:mx-2 shadow-[0_8px_28px_-8px_rgba(0,0,0,0.45)] overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-around py-2 px-2 sm:px-4",children:a.map(r=>{const i=r.icon,c=s.pathname===r.path;return e.jsxs("button",{onClick:()=>t(r.path),className:`relative flex flex-col items-center justify-center py-1.5 px-2 min-w-0 transition-all duration-200 ease-in-out hover:scale-110 active:scale-95 ${c?"qd-active-underline":""}`,style:{WebkitTapHighlightColor:"transparent"},children:[e.jsx("span",{className:"relative",children:e.jsx(i,{size:24,strokeWidth:2.2,className:`mb-1 drop-shadow ${c?o(r.path):"text-white/80"}`})}),e.jsx("span",{className:`text-[10px] font-semibold tracking-wide ${c?o(r.path):"text-white/85"}`,children:r.label})]},r.path)})}),e.jsx("div",{className:"h-[3px] w-full bg-gradient-to-r from-[#ffe06b] via-[#ff8d8d] to-[#ff73d9] opacity-80"})]})})};function Et({open:s,onClose:t,streakDay:a,coinsEarned:o}){const r=Number.isFinite(Number(o))?Number(o):0;return e.jsx(ct,{children:s&&e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:t,children:e.jsxs(z.div,{initial:{y:30,opacity:0,scale:.98},animate:{y:0,opacity:1,scale:1},exit:{y:20,opacity:0,scale:.98},transition:{type:"spring",stiffness:300,damping:24},className:"relative max-w-md w-full rounded-2xl border border-indigo-700/60 bg-gradient-to-br from-indigo-950/60 via-violet-950/50 to-fuchsia-950/50 shadow-2xl overflow-hidden backdrop-blur-xl",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 rounded-full bg-amber-200/40 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 rounded-full bg-indigo-200/40 blur-3xl"})]}),e.jsxs("div",{className:"p-6 text-center relative",children:[e.jsx(z.div,{initial:{scale:.8,rotate:-10,opacity:0},animate:{scale:1,rotate:0,opacity:1},transition:{type:"spring",stiffness:200,damping:12},className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center shadow-lg",children:e.jsx(He,{className:"w-9 h-9 text-white drop-shadow"})}),e.jsx("h3",{className:"mt-4 text-2xl font-extrabold bg-gradient-to-r from-sky-400 via-cyan-400 to-emerald-400 bg-clip-text text-transparent",children:"Daily Streak!"}),e.jsxs("p",{className:"mt-2 text-slate-200",children:["You are on day ",e.jsx("span",{className:"font-semibold text-indigo-200",children:a})," ðŸ”¥"]}),e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-amber-900/30 text-amber-200 border border-amber-500/40",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-semibold",children:["+",r," coins"]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"inline-flex items-center px-5 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 via-violet-500 to-fuchsia-500 text-white font-semibold shadow hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-fuchsia-300",children:"Awesome!"})})]})]})})})}const St=()=>{const{user:s,userProfile:t,refreshUserProfile:a}=T(),o=Number((t==null?void 0:t.wallet_balance)||0),r=({}.VITE_DOWNLOAD_URL||"/quiz-dangal.apk").trim();n.useState(!1),n.useEffect(()=>{},[r]);const[i,c]=n.useState({open:!1,day:0,coins:0}),x=n.useRef(!1);return n.useEffect(()=>{if(!s||x.current)return;const d=setTimeout(async()=>{x.current=!0;try{const{data:l,error:y}=await _.rpc("handle_daily_login",{user_uuid:s.id});if(y){console.error("Error handling daily login:",y);return}l&&l.is_new_login&&(await a(s),c({open:!0,day:l.streak_day,coins:l.coins_earned}))}catch(l){console.error("Exception handling daily login:",l)}finally{x.current=!1}},1500);return()=>clearTimeout(d)},[s,a]),e.jsxs(e.Fragment,{children:[e.jsx(z.header,{initial:{y:-40,opacity:0},animate:{y:0,opacity:1},transition:{duration:.35,ease:"easeOut"},className:"sticky top-0 z-[60] px-2 pt-2",children:e.jsxs("div",{className:"qd-glass-soft rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"h-[3px] w-full bg-gradient-to-r from-[#ffe06b] via-[#ff8d8d] to-[#ff73d9] opacity-80"}),e.jsx("div",{className:"container mx-auto px-2 sm:px-5 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:[e.jsxs(Ye,{to:"/",className:"flex items-center gap-2 group",children:[e.jsx("img",{src:"/logo.svg",alt:"Quiz Dangal Logo",width:"48",height:"48",decoding:"async",onError:u=>{u.currentTarget.src="/android-chrome-512x512.png"},className:"w-11 h-11 sm:w-12 sm:h-12 rounded-full shadow-lg object-contain select-none",draggable:"false",style:{imageRendering:"auto"}}),e.jsxs("div",{className:"leading-tight whitespace-nowrap select-none",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-extrabold qd-gradient-text drop-shadow-[0_2px_4px_rgba(0,0,0,0.35)] tracking-tight",children:"Quiz Dangal"}),e.jsx("div",{className:"text-[11px] sm:text-xs text-white/70 -mt-0.5 font-medium",children:"Where Minds Clash"})]})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 sm:gap-3 translate-x-1 sm:translate-x-0",children:[e.jsxs("div",{className:"hidden sm:inline-flex hd-badge hd-badge-gold",title:"Coins","aria-label":`Coins: ${o.toLocaleString()}`,children:[e.jsx("div",{className:"hd-badge-icon","aria-hidden":"true",children:e.jsx("div",{className:"hd-badge-coin",children:e.jsxs("div",{className:"hd-badge-coin-front",children:[e.jsx(Ge,{className:"hd-badge-coin-icon"}),e.jsx("span",{className:"hd-badge-coin-shine"})]})})}),e.jsxs("div",{className:"hd-badge-info select-none",children:[e.jsx("span",{className:"hd-badge-value tabular-nums",children:o.toLocaleString()}),e.jsx("span",{className:"hd-badge-label",children:"COINS"})]})]}),(()=>{const u=Number((t==null?void 0:t.current_streak)||0);return e.jsxs("button",{type:"button",onClick:()=>{const d=u,l=Math.min(50,10+Math.max(0,d-1)*5);c({open:!0,day:d,coins:l})},className:"hd-badge hd-badge-streak -ml-1 sm:-ml-2",title:"Daily Streak","aria-label":`Streak: ${u} days`,children:[e.jsxs("div",{className:"hd-badge-icon hd-badge-icon-streak-full","aria-hidden":"true",children:[e.jsx("div",{className:"streak-orb"}),e.jsx("span",{className:"streak-emoji",style:{fontSize:"20px",lineHeight:1,filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.55)) drop-shadow(0 0 4px rgba(255,150,40,0.5))"},children:"ðŸ”¥"})]}),e.jsxs("div",{className:"hd-badge-info select-none",children:[e.jsx("span",{className:"hd-badge-value tabular-nums",children:u}),e.jsx("span",{className:"hd-badge-label",children:"STREAK"})]})]})})()]})]})})]})}),e.jsx(Et,{open:i.open,onClose:()=>c(u=>({...u,open:!1})),streakDay:i.day,coinsEarned:i.coins})]})},Se=Ke,At=Xe,Ae=n.forwardRef(({className:s,...t},a)=>e.jsx(ce,{ref:a,className:w("fixed inset-0 z-[80] bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Ae.displayName=ce.displayName;const Y=n.forwardRef(({className:s,children:t,closeButton:a=!0,overlayClassName:o,...r},i)=>e.jsxs(At,{children:[e.jsx(Ae,{className:o}),e.jsxs(de,{ref:i,className:w("fixed left-[50%] top-[50%] z-[80] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,a&&e.jsxs(Je,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Y.displayName=de.displayName;const G=({className:s,...t})=>e.jsx("div",{className:w("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});G.displayName="DialogHeader";const J=n.forwardRef(({className:s,...t},a)=>e.jsx(ue,{ref:a,className:w("text-lg font-semibold leading-none tracking-tight",s),...t}));J.displayName=ue.displayName;const It=n.forwardRef(({className:s,...t},a)=>e.jsx(me,{ref:a,className:w("text-sm text-muted-foreground",s),...t}));It.displayName=me.displayName;const Rt=[{code:"hindi",name:"à¤¹à¤¿à¤‚à¤¦à¥€",flag:"ðŸ‡®ðŸ‡³"},{code:"english",name:"English",flag:"ðŸ‡ºðŸ‡¸"},{code:"punjabi",name:"à¨ªà©°à¨œà¨¾à¨¬à©€",flag:"ðŸ‡®ðŸ‡³"},{code:"gujarati",name:"àª—à«àªœàª°àª¾àª¤à«€",flag:"ðŸ‡®ðŸ‡³"},{code:"marathi",name:"à¤®à¤°à¤¾à¤ à¥€",flag:"ðŸ‡®ðŸ‡³"},{code:"bengali",name:"à¦¬à¦¾à¦‚à¦²à¦¾",flag:"ðŸ‡®ðŸ‡³"},{code:"tamil",name:"à®¤à®®à®¿à®´à¯",flag:"ðŸ‡®ðŸ‡³"},{code:"telugu",name:"à°¤à±†à°²à±à°—à±",flag:"ðŸ‡®ðŸ‡³"}],Pt=({isOpen:s,onComplete:t})=>{const{user:a,supabase:o,refreshUserProfile:r}=T(),[i,c]=n.useState("hindi"),[x,u]=n.useState(!1),d=async()=>{if(i){u(!0);try{const{error:l}=await o.from("profiles").update({preferred_language:i}).eq("id",a.id);if(l)throw l;await r(a),t()}catch(l){console.error("Language selection error:",l)}finally{u(!1)}}};return e.jsx(Se,{open:s,onOpenChange:()=>{},children:e.jsxs(Y,{overlayClassName:"!bg-transparent !backdrop-blur-0",className:"sm:max-w-md bg-gradient-to-br from-indigo-950/60 via-violet-950/50 to-fuchsia-950/50 border border-indigo-700/60 backdrop-blur-xl text-slate-100",closeButton:!1,children:[e.jsxs(G,{children:[e.jsxs(J,{className:"text-center font-extrabold flex items-center justify-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-cyan-300"}),e.jsx("span",{className:"bg-gradient-to-r from-sky-400 via-cyan-400 to-emerald-400 bg-clip-text text-transparent",children:"Choose Your Preferred Language"})]}),e.jsx("p",{className:"text-sm text-slate-300 text-center",children:"Select the language you're most comfortable with"})]}),e.jsx("div",{className:"space-y-3",children:Rt.map(l=>e.jsxs("button",{onClick:()=>c(l.code),className:`w-full p-3 rounded-xl border transition-all duration-200 flex items-center gap-3 ${i===l.code?"border-cyan-600/50 bg-cyan-900/30 text-cyan-100":"border-slate-700/60 bg-slate-900/60 hover:bg-slate-800/60"}`,children:[e.jsx("span",{className:"text-2xl",children:l.flag}),e.jsx("span",{className:"font-medium text-lg",children:l.name}),i===l.code&&e.jsx("div",{className:"ml-auto w-4 h-4 bg-cyan-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]},l.code))}),e.jsx(F,{onClick:d,className:"w-full mt-6 bg-gradient-to-r from-indigo-500 via-violet-500 to-fuchsia-500 hover:opacity-90",disabled:x||!i,children:x?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Continue"})]})})},$=n.forwardRef(({className:s,type:t,...a},o)=>e.jsx("input",{type:t,className:w("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:o,...a}));$.displayName="Input";const kt=Q("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),H=n.forwardRef(({className:s,...t},a)=>e.jsx(fe,{ref:a,className:w(kt(),s),...t}));H.displayName=fe.displayName;const Ie=n.forwardRef(({className:s,...t},a)=>e.jsx(he,{ref:a,className:w("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Ie.displayName=he.displayName;const Re=n.forwardRef(({className:s,...t},a)=>e.jsx(xe,{ref:a,className:w("aspect-square h-full w-full",s),...t}));Re.displayName=xe.displayName;const Pe=n.forwardRef(({className:s,...t},a)=>e.jsx(ge,{ref:a,className:w("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Pe.displayName=ge.displayName;const Dt=({isOpen:s,onClose:t,isFirstTime:a=!1})=>{const{user:o,userProfile:r,supabase:i,refreshUserProfile:c}=T(),[x,u]=n.useState(!1),[d,l]=n.useState({username:"",mobile_number:"",avatar_url:""}),[y,g]=n.useState({}),[O,R]=n.useState(null),[S,A]=n.useState("");n.useEffect(()=>{r&&(l({username:r.username||"",mobile_number:r.mobile_number||"",avatar_url:r.avatar_url||""}),A(r.avatar_url||""))},[r]);const m=()=>{const f={};return d.username.trim()?d.username.length<3?f.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(d.username)||(f.username="Username can only contain letters, numbers, and underscores"):f.username="Username is required",d.mobile_number.trim()?/^[6-9]\d{9}$/.test(d.mobile_number)||(f.mobile_number="Please enter a valid 10-digit mobile number"):f.mobile_number="Mobile number is required",g(f),Object.keys(f).length===0},p=async f=>{if(!f||f===(r==null?void 0:r.username))return!0;try{const{data:j,error:I}=await i.from("profiles").select("id").eq("username",f).neq("id",o.id);return I?(console.error("Username check error:",I),!0):!j||j.length===0}catch(j){return console.error("Username availability check failed:",j),!0}},v=async f=>{const j=f.name.split(".").pop(),I=`${o.id}-${Date.now()}.${j}`,P=`${o.id}/${I}`,{error:k}=await i.storage.from("avatars").upload(P,f,{upsert:!0});if(k)throw k;const{data:q}=i.storage.from("avatars").getPublicUrl(P);return q.publicUrl},N=f=>{const j=f.target.files[0];if(j){if(j.size>5*1024*1024){g({...y,avatar:"File size must be less than 5MB"});return}R(j);const I=new FileReader;I.onload=k=>A(k.target.result),I.readAsDataURL(j);const P={...y};delete P.avatar,g(P)}},L=async f=>{if(f.preventDefault(),!!m()){u(!0);try{if(!await p(d.username)){g({username:"Username is already taken"}),u(!1);return}let I=d.avatar_url;if(O)try{I=await v(O)}catch(q){console.error("Avatar upload failed:",q)}const P={username:d.username.trim(),mobile_number:d.mobile_number.trim(),avatar_url:I,is_profile_complete:!0},{error:k}=await i.from("profiles").update(P).eq("id",o.id);if(k)throw k;alert("Profile updated successfully!"),await c(o),t()}catch(j){console.error("Profile update error:",j),g({submit:j.message||"Failed to update profile"})}finally{u(!1)}}},X=()=>((r==null?void 0:r.full_name)||(r==null?void 0:r.username)||(o==null?void 0:o.email)||"").split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2);return e.jsx(Se,{open:s,onOpenChange:a?void 0:t,children:e.jsxs(Y,{className:"sm:max-w-md",closeButton:!a,children:[e.jsxs(G,{children:[e.jsx(J,{className:"text-center",children:a?"Complete Your Profile":"Edit Profile"}),a&&e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Please complete your profile to continue"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Ie,{className:"w-20 h-20",children:[e.jsx(Re,{src:S}),e.jsx(Pe,{className:"text-lg",children:X()})]}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-500 text-white p-1.5 rounded-full cursor-pointer hover:bg-blue-600 transition-colors",children:[e.jsx(et,{className:"w-3 h-3"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click camera to change photo"}),y.avatar&&e.jsx("p",{className:"text-xs text-red-500",children:y.avatar})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(H,{htmlFor:"username",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($,{id:"username",value:d.username,onChange:f=>l({...d,username:f.target.value}),placeholder:"Enter unique username",className:y.username?"border-red-500":""}),y.username&&e.jsx("p",{className:"text-xs text-red-500",children:y.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(H,{htmlFor:"mobile",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($,{id:"mobile",type:"tel",value:d.mobile_number,onChange:f=>l({...d,mobile_number:f.target.value}),placeholder:"Enter 10-digit mobile number",className:y.mobile_number?"border-red-500":""}),y.mobile_number&&e.jsx("p",{className:"text-xs text-red-500",children:y.mobile_number})]}),y.submit&&e.jsx("p",{className:"text-sm text-red-500 text-center",children:y.submit}),e.jsx(F,{type:"submit",className:"w-full",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2 animate-spin"}),a?"Completing Profile...":"Updating Profile..."]}):a?"Complete Profile":"Update Profile"})]})]})})},Ot=()=>{const{user:s,userProfile:t,refreshUserProfile:a}=T(),[o,r]=n.useState(null),i=n.useCallback(()=>{if(!t)return;const c=t.created_at?new Date(t.created_at):null,x=10*60*1e3,u=c?Date.now()-c.getTime()<=x:!1,d=!!(t.username&&t.mobile_number&&t.is_profile_complete),l=s?`qd_new_profile_prompt_shown_${s.id}`:null;let y=!1;try{l&&(y=sessionStorage.getItem(l)==="1")}catch(g){}if(u&&!d&&!y){try{l&&sessionStorage.setItem(l,"1")}catch(g){}r("profile");return}if(t.preferred_language===null){r("language");return}r(null)},[t]);return n.useEffect(()=>{const c=setTimeout(()=>{t&&i()},1500);return()=>clearTimeout(c)},[t,i]),!t||!o?null:o==="profile"?e.jsx(Dt,{isOpen:!0,onClose:()=>r(null),isFirstTime:!0}):o==="language"?e.jsx(Pt,{isOpen:!0,onComplete:()=>r(null)}):null},Tt=()=>{const s=({}.VITE_DOWNLOAD_URL||"/quiz-dangal.apk").trim(),t=!{}.VITE_DOWNLOAD_URL&&s.endsWith("/quiz-dangal.apk"),[a,o]=n.useState(!0),[r,i]=n.useState(!1),[c,x]=n.useState(null),[u,d]=n.useState(!1);n.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;i(g),(async()=>{if(!t){o(!0);return}try{const A=await fetch(s,{method:"HEAD"});o(A.ok)}catch(A){o(!1)}})();const R=A=>{A.preventDefault(),x(A),d(!0)},S=()=>{x(null),d(!1)};return window.addEventListener("beforeinstallprompt",R),window.addEventListener("appinstalled",S),()=>{window.removeEventListener("beforeinstallprompt",R),window.removeEventListener("appinstalled",S)}},[s,t]);const l=async()=>{try{const g=await fetch(s,{mode:"cors",credentials:"omit"});if(!g.ok)throw new Error("Network response was not ok");const O=await g.blob(),R=URL.createObjectURL(O),S=document.createElement("a");S.href=R,S.download=s.split("/").pop()||"quiz-dangal-download",document.body.appendChild(S),S.click(),S.remove(),URL.revokeObjectURL(R)}catch(g){window.open(s,"_blank","noopener,noreferrer")}},y=async()=>{try{if(!c)return;c.prompt();const{outcome:g}=await c.userChoice;g==="accepted"&&(x(null),d(!1))}catch(g){}};return r||!a&&!u?null:e.jsxs("button",{onClick:a?l:y,className:"w-14 h-14 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center group relative overflow-hidden",style:{position:"fixed",bottom:"100px",right:"20px",zIndex:9999},"aria-label":a?"Download App":"Install App",title:a?"Download App":"Install App",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-red-600 via-orange-500 to-yellow-400 opacity-30 animate-pulse"}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-2 left-3 w-1 h-1 bg-yellow-300 rounded-full animate-bounce",style:{animationDelay:"0s",animationDuration:"1s"}}),e.jsx("div",{className:"absolute top-3 right-2 w-1 h-1 bg-orange-300 rounded-full animate-bounce",style:{animationDelay:"0.3s",animationDuration:"1.2s"}}),e.jsx("div",{className:"absolute bottom-3 left-2 w-1 h-1 bg-red-300 rounded-full animate-bounce",style:{animationDelay:"0.6s",animationDuration:"0.8s"}})]}),e.jsx(tt,{className:"w-5 h-5 relative z-10"}),e.jsx("span",{className:"hidden group-hover:block absolute right-16 bg-gray-900 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:a?"Download App":"Install App"})]})},Lt="BBzEo0FGas7iHo55RBT-n6RYxZX5HpwPSi3rDDx7BwVBF0EDCaw3bsEjip0XVfV6jL5sSxvsQNSz6bqhtXDidtA";function Ct(s){const t="=".repeat((4-s.length%4)%4),a=(s+t).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(a),r=new Uint8Array(o.length);for(let i=0;i<o.length;++i)r[i]=o.charCodeAt(i);return r}function zt(){const[s,t]=n.useState(!1),[a,o]=n.useState(null),[r,i]=n.useState(null);return n.useEffect(()=>{"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.ready.then(x=>{x.pushManager.getSubscription().then(u=>{u&&(t(!0),o(u))})})},[]),{isSubscribed:s,subscribeToPush:async()=>{if(!("serviceWorker"in navigator&&"PushManager"in window)){i("Push notifications are not supported by this browser.");return}try{const u=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ct(Lt)}),{error:d}=await _.rpc("save_push_subscription",{p_subscription_object:u.toJSON()});if(d)throw d;return o(u),t(!0),i(null),console.log("User is subscribed.",u),!0}catch(x){return console.error("Failed to subscribe the user: ",x),i(x.message),!1}},error:r}}const Ut=n.lazy(()=>b(()=>import("./Home-8e3a57d9.js"),["assets/Home-8e3a57d9.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),Vt=n.lazy(()=>b(()=>import("./MyQuizzes-93e666cd.js"),["assets/MyQuizzes-93e666cd.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),Mt=n.lazy(()=>b(()=>import("./Wallet-94cdab8b.js"),["assets/Wallet-94cdab8b.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),Ft=n.lazy(()=>b(()=>import("./Profile-df429046.js"),["assets/Profile-df429046.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/supabase-97550265.js","assets/motion-b88ded6b.js"])),qt=n.lazy(()=>b(()=>import("./Login-c5ff40b4.js"),["assets/Login-c5ff40b4.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),ee=n.lazy(()=>b(()=>import("./ResetPassword-2a251390.js"),["assets/ResetPassword-2a251390.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/supabase-97550265.js","assets/motion-b88ded6b.js"])),Wt=n.lazy(()=>b(()=>import("./AboutUs-413e83e6.js"),["assets/AboutUs-413e83e6.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/brand-3858c04f.js","assets/motion-b88ded6b.js"])),Bt=n.lazy(()=>b(()=>import("./ContactUs-5eaf69ac.js"),["assets/ContactUs-5eaf69ac.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/brand-3858c04f.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),$t=n.lazy(()=>b(()=>import("./TermsConditions-66149fd7.js"),["assets/TermsConditions-66149fd7.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/brand-3858c04f.js","assets/motion-b88ded6b.js"])),Ht=n.lazy(()=>b(()=>import("./PrivacyPolicy-1e250653.js"),["assets/PrivacyPolicy-1e250653.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/brand-3858c04f.js","assets/motion-b88ded6b.js"])),Qt=n.lazy(()=>b(()=>import("./Quiz-31587ad9.js"),["assets/Quiz-31587ad9.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),Yt=n.lazy(()=>b(()=>import("./Admin-5eef6ba3.js"),["assets/Admin-5eef6ba3.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),Gt=n.lazy(()=>b(()=>import("./Results-a9b980fb.js"),["assets/Results-a9b980fb.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),Jt=n.lazy(()=>b(()=>import("./Leaderboards-d3ee035a.js"),["assets/Leaderboards-d3ee035a.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"])),Xt=n.lazy(()=>b(()=>import("./Redemptions-406629dc.js"),["assets/Redemptions-406629dc.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/supabase-97550265.js","assets/motion-b88ded6b.js"])),Kt=n.lazy(()=>b(()=>import("./Language-ba13cc46.js"),["assets/Language-ba13cc46.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/supabase-97550265.js","assets/motion-b88ded6b.js"])),Zt=n.lazy(()=>b(()=>import("./ReferEarn-cb656d31.js"),["assets/ReferEarn-cb656d31.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/supabase-97550265.js","assets/motion-b88ded6b.js"])),es=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-white/20 rounded-2xl p-8 max-w-md w-full shadow-xl text-center",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Check your email"}),e.jsx("p",{className:"text-gray-600",children:"We've sent a confirmation link to your email address. Please click the link to complete your registration."})]})}),E=({children:s})=>e.jsx("div",{className:"page-transition",children:s}),ke=()=>e.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-indigo-200 border-t-indigo-600"})});function ts(){var o;const{user:s,userProfile:t,loading:a}=T();return zt(),a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-indigo-200 border-t-indigo-600"}),e.jsx("div",{className:"text-indigo-600 font-medium animate-pulse",children:"Loading Quiz Dangal..."})]})}):e.jsx(_t,{children:e.jsx(st,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs("div",{className:"min-h-screen flex flex-col relative text-gray-50 transition-all duration-300 ease-in-out",children:[e.jsx("div",{className:"home-bg"}),e.jsxs(at,{children:[e.jsx("title",{children:"Quiz Dangal - Opinion Based Quiz App"}),e.jsx("meta",{name:"description",content:"Join Quiz Dangal for exciting opinion-based quizzes with real prizes!"})]}),e.jsx(n.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(be,{children:s?((o=s.app_metadata)==null?void 0:o.provider)==="email"&&!s.email_confirmed_at?e.jsxs(e.Fragment,{children:[e.jsx(h,{path:"/reset-password",element:e.jsx(ee,{})}),e.jsx(h,{path:"*",element:e.jsx(es,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{path:"/quiz/:id",element:e.jsx(Qt,{})}),e.jsx(h,{path:"/results/:id",element:e.jsx(Gt,{})}),e.jsx(h,{path:"/*",element:e.jsx(as,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{path:"/reset-password",element:e.jsx(ee,{})}),e.jsx(h,{path:"*",element:e.jsx(qt,{})})]})})}),e.jsx(jt,{})]})})})}function ss({children:s}){const{userProfile:t,loading:a}=T();return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-3 border-indigo-200 border-t-indigo-600"})}):!t||t.role!=="admin"?e.jsx(D,{to:"/",replace:!0}):s}const as=()=>(n.useEffect(()=>{const a=(o=>window.requestIdleCallback?window.requestIdleCallback(o):setTimeout(o,1200))(()=>{b(()=>import("./Leaderboards-d3ee035a.js"),["assets/Leaderboards-d3ee035a.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"]),b(()=>import("./MyQuizzes-93e666cd.js"),["assets/MyQuizzes-93e666cd.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"]),b(()=>import("./Wallet-94cdab8b.js"),["assets/Wallet-94cdab8b.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/motion-b88ded6b.js","assets/supabase-97550265.js"]),b(()=>import("./Profile-df429046.js"),["assets/Profile-df429046.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/supabase-97550265.js","assets/motion-b88ded6b.js"]),b(()=>import("./ReferEarn-cb656d31.js"),["assets/ReferEarn-cb656d31.js","assets/react-vendor-c284acb6.js","assets/vendor-3e030596.js","assets/supabase-97550265.js","assets/motion-b88ded6b.js"])});return()=>{window.cancelIdleCallback&&typeof a=="number"&&window.cancelIdleCallback(a)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(St,{}),e.jsx("main",{className:"flex-1 pb-24 pt-4 sm:pt-6",children:e.jsx(n.Suspense,{fallback:e.jsx(ke,{}),children:e.jsxs(be,{children:[e.jsx(h,{path:"/",element:e.jsx(E,{children:e.jsx(Ut,{})})}),e.jsx(h,{path:"/my-quizzes",element:e.jsx(E,{children:e.jsx(Vt,{})})}),e.jsx(h,{path:"/wallet",element:e.jsx(E,{children:e.jsx(Mt,{})})}),e.jsx(h,{path:"/profile",element:e.jsx(E,{children:e.jsx(Ft,{})})}),e.jsx(h,{path:"/leaderboards",element:e.jsx(E,{children:e.jsx(Jt,{})})}),e.jsx(h,{path:"/language",element:e.jsx(E,{children:e.jsx(Kt,{})})}),e.jsx(h,{path:"/refer",element:e.jsx(E,{children:e.jsx(Zt,{})})}),e.jsx(h,{path:"/rewards",element:e.jsx(D,{to:"/wallet",replace:!0})}),e.jsx(h,{path:"/redemptions",element:e.jsx(E,{children:e.jsx(Xt,{})})}),e.jsx(h,{path:"/about-us",element:e.jsx(E,{children:e.jsx(Wt,{})})}),e.jsx(h,{path:"/contact-us",element:e.jsx(E,{children:e.jsx(Bt,{})})}),e.jsx(h,{path:"/terms-conditions",element:e.jsx(E,{children:e.jsx($t,{})})}),e.jsx(h,{path:"/privacy-policy",element:e.jsx(E,{children:e.jsx(Ht,{})})}),e.jsx(h,{path:"/admin",element:e.jsx(ss,{children:e.jsx(E,{children:e.jsx(Yt,{})})})}),e.jsx(h,{path:"/admin/users",element:e.jsx(D,{to:"/admin?tab=users",replace:!0})}),e.jsx(h,{path:"/admin/leaderboards",element:e.jsx(D,{to:"/admin?tab=leaderboards",replace:!0})}),e.jsx(h,{path:"/admin/redemptions",element:e.jsx(D,{to:"/admin?tab=redemptions",replace:!0})}),e.jsx(h,{path:"/admin/reports",element:e.jsx(D,{to:"/admin?tab=reports",replace:!0})}),e.jsx(h,{path:"*",element:e.jsx(D,{to:"/",replace:!0})})]})})}),e.jsx(Nt,{}),e.jsx(Tt,{}),e.jsx(Ot,{})]}));const De=document.getElementById("root");De||console.error("Root element #root not found in index.html");rt.createRoot(De).render(e.jsx(le.StrictMode,{children:e.jsx(ut,{children:e.jsx(nt,{children:e.jsx(ts,{})})})}));export{F as B,$ as I,Pt as L,Dt as P,Et as S,T as a,zt as b,H as c,w as d,_ as s,gt as u};

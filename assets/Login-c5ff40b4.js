import{u as T,f as q,r as a,j as e,ac as O,ad as W}from"./react-vendor-c284acb6.js";import{u as H,a as Q,s as k,I as n,B as c,c as p}from"./index-e74e2d11.js";import{m as o}from"./motion-b88ded6b.js";import"./vendor-3e030596.js";import"./supabase-97550265.js";const Y=()=>{const{toast:r}=H(),C=Q(),f=T(),b=q(),{signUp:E,signIn:L}=C,[i,w]=a.useState(!0),[l,F]=a.useState(""),[d,P]=a.useState(""),[m,v]=a.useState(!1),[u,j]=a.useState(!1),[I,y]=a.useState(!1),[A,h]=a.useState(!1),[x,R]=a.useState(""),[N,S]=a.useState(!1),[U,z]=a.useState(""),[g,B]=a.useState(!1);a.useEffect(()=>{new URLSearchParams(f.search).get("reset")==="1"&&(r({title:"Password updated",description:"Please sign in with your new password."}),w(!1),b("/login",{replace:!0}))},[f.search,b,r]);const G=async()=>{j(!0);try{const{error:t}=await k.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(t)throw t}catch(t){r({title:"Google Login Failed",description:t.message||"Please try again.",variant:"destructive"}),j(!1)}},D=async t=>{if(t.preventDefault(),v(!0),y(!1),i){const{error:s,data:M}=await E(l,d);s?r({title:"Sign Up Failed",description:s.message,variant:"destructive"}):(y(!0),r({title:"Confirmation email sent!",description:"Please check your inbox to verify your email."}))}else{const{error:s,data:M}=await L(l,d);s&&r({title:"Sign In Failed",description:s.message,variant:"destructive"})}v(!1)};return I?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-indigo-900/50 via-violet-900/40 to-fuchsia-900/40 backdrop-blur-xl border border-indigo-700/60 rounded-2xl p-8 max-w-md w-full shadow-xl text-center text-slate-100",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-violet-400 via-indigo-300 to-fuchsia-400 bg-clip-text text-transparent mb-4",children:"Check your email"}),e.jsxs("p",{className:"text-slate-300",children:["We've sent a confirmation link to ",e.jsx("strong",{children:l}),". Please click the link to complete your registration."]})]})}):A?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-indigo-900/50 via-violet-900/40 to-fuchsia-900/40 backdrop-blur-xl border border-indigo-700/60 rounded-2xl p-8 max-w-md w-full shadow-xl text-center text-slate-100",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-violet-400 via-indigo-300 to-fuchsia-400 bg-clip-text text-transparent mb-4",children:"Forgot Password"}),e.jsx("p",{className:"text-slate-300 mb-4",children:"Enter your email to receive a password reset link."}),e.jsxs("form",{onSubmit:async t=>{t.preventDefault(),S(!0);try{const{error:s}=await k.auth.resetPasswordForEmail(x,{redirectTo:`${window.location.origin}/reset-password`});if(s)throw s;r({title:"Reset Email Sent!",description:`Check your inbox (${x}) for a password reset link.`}),h(!1)}catch(s){r({title:"Reset Failed",description:s.message||"Please try again.",variant:"destructive"})}S(!1)},className:"space-y-4",children:[e.jsx(n,{id:"forgot-email",type:"email",value:x,onChange:t=>R(t.target.value),placeholder:"you@example.com",required:!0,className:"mb-2 bg-white text-black placeholder-slate-500 border-slate-300"}),e.jsx(c,{type:"submit",disabled:N,className:"w-full",children:N?"Sending...":"Send Reset Link"}),e.jsx(c,{type:"button",variant:"outline",className:"w-full bg-white text-black border border-slate-300 hover:bg-slate-50 rounded-lg shadow-md focus:ring-2 focus:ring-indigo-500/40",onClick:()=>h(!1),children:"Back to Login"})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"bg-gradient-to-br from-indigo-900/50 via-violet-900/40 to-fuchsia-900/40 backdrop-blur-xl border border-indigo-700/60 rounded-2xl p-8 max-w-md w-full shadow-xl text-slate-100",children:[e.jsxs(o.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-center mb-8",children:[e.jsx("img",{src:"/logo.svg",alt:"Quiz Dangal Logo",onError:t=>{t.currentTarget.src="/android-chrome-512x512.png"},className:"w-20 h-20 mx-auto mb-4 rounded-full shadow-lg"}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-violet-400 via-indigo-300 to-fuchsia-400 bg-clip-text text-transparent mb-2",children:"Quiz Dangal"}),e.jsx("p",{className:"text-slate-300",children:"Where Minds Clash"})]}),e.jsx("div",{className:"mb-2 text-left",children:e.jsx("span",{className:"text-indigo-300 text-sm font-semibold",children:i?"Create Account":"Sign In"})}),e.jsxs(o.form,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"email",className:"text-slate-200",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:l,onChange:t=>F(t.target.value),placeholder:"Enter your email address",required:!0,className:"bg-white text-black placeholder-slate-500 border-slate-300"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"password",className:"text-slate-200",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"password",type:g?"text":"password",value:d,onChange:t=>P(t.target.value),placeholder:"Enter your password",required:!0,autoComplete:i?"new-password":"current-password",className:"pr-10 bg-white text-black placeholder-slate-500 border-slate-300"}),e.jsx("button",{type:"button","aria-label":g?"Hide password":"Show password",onClick:()=>B(t=>!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-600 hover:text-slate-800",children:g?e.jsx(O,{className:"h-4 w-4"}):e.jsx(W,{className:"h-4 w-4"})})]}),!i&&e.jsx("button",{type:"button",className:"text-xs text-indigo-300 hover:underline mt-1 float-right",onClick:()=>h(!0),children:"Forgot Password?"})]}),i&&e.jsxs("div",{children:[e.jsx(p,{htmlFor:"referral",className:"text-slate-200",children:"Referral Code (optional)"}),e.jsx(n,{id:"referral",type:"text",value:U,onChange:t=>z(t.target.value.trim()),placeholder:"Enter referral code",className:"bg-white text-black placeholder-slate-500 border-slate-300"})]}),e.jsx(c,{type:"submit",disabled:m||u,className:"w-full bg-gradient-to-r from-indigo-600 via-violet-600 to-fuchsia-600 hover:from-indigo-500 hover:to-fuchsia-700 text-white font-semibold py-3 rounded-lg shadow-lg",children:m?"Processing...":i?"Sign Up":"Sign In"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-slate-700/60"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-900/80 border border-slate-700/60 px-3 py-0.5 text-slate-300 rounded-full tracking-wide",children:"Or continue with"})})]}),e.jsx(c,{onClick:G,disabled:m||u,variant:"outline",className:"w-full font-semibold py-3 rounded-xl shadow-md bg-white text-black border border-slate-300 hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500/40","aria-label":"Continue with Google",children:u?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}):e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 18 18","aria-hidden":"true",focusable:"false",children:[e.jsx("path",{fill:"#EA4335",d:"M9 3.48c1.69 0 2.82.73 3.47 1.34l2.36-2.36C13.7 1.07 11.68 0 9 0 5.48 0 2.44 1.99.96 4.9l2.83 2.2C4.5 5.04 6.57 3.48 9 3.48z"}),e.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.85 2.92l2.84 2.2c1.71-1.57 2.69-3.88 2.69-6.62z"}),e.jsx("path",{fill:"#FBBC05",d:"M3.79 10.59A5.52 5.52 0 0 1 3.48 9c0-.55.09-1.08.28-1.59L.96 5.2A9.01 9.01 0 0 0 0 9c0 1.45.35 2.82.96 4.02l2.83-2.43z"}),e.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.5-1.78.85-3.12.85-2.43 0-4.49-1.56-5.21-3.68L.96 13.02C2.44 16.01 5.48 18 9 18z"})]}),e.jsx("span",{className:"font-semibold",children:"Continue with Google"})]})}),e.jsxs("p",{className:"mt-6 text-center text-sm text-slate-300",children:[i?"Already have an account?":"Don't have an account?"," ",e.jsx("button",{onClick:()=>w(!i),className:"font-semibold text-indigo-300 hover:text-indigo-200",children:i?"Sign In":"Sign Up"})]})]})})};export{Y as default};

import{u as L,a as R,j as e,s as B}from"./index-b6b68c05.js";import{r as i}from"./react-8a702e3e.js";import{L as l}from"./router-f2cf3f51.js";import{m as s}from"./motion-511bde03.js";import{C as f,f as y,G as E,g as W,h as v,i as A,j as M,T as $,k as G,l as K,m as I,W as O}from"./icons-5fed0bfb.js";import"./supabase-4c1332f7.js";const V=()=>{L();const{user:c,userProfile:m}=R(),[d,j]=i.useState([]),[w,N]=i.useState(!0),[_,u]=i.useState(!1),[P,h]=i.useState(0),[k,z]=i.useState(0),S=["credit","reward","bonus","referral","daily_login","quiz_reward","purchase","debit","refund","join_fee","prize"],x=["reward","bonus","credit","referral","refund","daily_login","quiz_reward","prize"];i.useEffect(()=>{(async()=>{if(c)try{const{data:a,error:n}=await B.from("transactions").select("*").eq("user_id",c.id).in("type",S).not("type","is",null).not("amount","is",null).neq("amount",0).order("created_at",{ascending:!1}).limit(10);n&&console.error(n),j(a||[])}catch(a){console.error(a)}finally{N(!1)}})()},[c]);const r=Number((m==null?void 0:m.wallet_balance)||0),[p,C]=i.useState(r);i.useEffect(()=>{if(r>p){u(!0);const t=setTimeout(()=>u(!1),600);return()=>clearTimeout(t)}C(r)},[r,p]);const b=t=>Number(t||0).toLocaleString();d.filter(t=>x.includes(String((t==null?void 0:t.type)||"").toLowerCase())).reduce((t,a)=>t+Math.abs(Number(a==null?void 0:a.amount)||0),0),d.filter(t=>!x.includes(String((t==null?void 0:t.type)||"").toLowerCase())).reduce((t,a)=>t+Math.abs(Number(a==null?void 0:a.amount)||0),0);const T=t=>{const a=String(t||"").toLowerCase();return a.includes("ref")?{icon:v,tint:"bg-sky-500/15",ring:"ring-sky-400/40",text:"text-sky-200"}:a.includes("quiz")||a.includes("prize")||a.includes("reward")?{icon:$,tint:"bg-emerald-500/10",ring:"ring-emerald-400/40",text:"text-emerald-200"}:a.includes("credit")||a.includes("daily")?{icon:f,tint:"bg-amber-500/15",ring:"ring-amber-300/50",text:"text-amber-200"}:a.includes("refund")?{icon:G,tint:"bg-indigo-500/15",ring:"ring-indigo-400/40",text:"text-indigo-200"}:a.includes("purchase")?{icon:K,tint:"bg-fuchsia-500/10",ring:"ring-fuchsia-400/40",text:"text-fuchsia-200"}:a.includes("debit")||a.includes("join")||a.includes("redeem")||a.includes("spend")?{icon:I,tint:"bg-rose-500/10",ring:"ring-rose-400/40",text:"text-rose-200"}:{icon:O,tint:"bg-slate-500/10",ring:"ring-slate-400/40",text:"text-slate-200"}};return e.jsxs("div",{className:"relative mx-auto max-w-5xl px-4 py-6",children:[e.jsx("div",{className:"absolute inset-0 -z-10 opacity-70 mix-blend-screen [background-image:radial-gradient(circle_at_18%_28%,rgba(56,189,248,0.25),rgba(0,0,0,0)60%),radial-gradient(circle_at_82%_72%,rgba(192,132,252,0.22),rgba(0,0,0,0)65%),radial-gradient(circle_at_50%_50%,rgba(244,114,182,0.15),rgba(0,0,0,0)55%)]"}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-center mb-5 bg-gradient-to-r from-cyan-300 via-emerald-300 to-amber-300 bg-clip-text text-transparent tracking-tight",children:"Wallet"}),e.jsxs(s.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.05},className:"relative overflow-hidden rounded-3xl p-6 md:p-7 mb-6 bg-white/[0.03] backdrop-blur-xl border border-white/10 shadow-2xl",children:[e.jsx(s.div,{"aria-hidden":!0,className:"pointer-events-none absolute -inset-10 bg-[conic-gradient(from_210deg_at_50%_50%,rgba(99,102,241,0.15),rgba(139,92,246,0.1),rgba(56,189,248,0.12),transparent_60%)]",initial:{rotate:0},animate:{rotate:360},transition:{repeat:1/0,duration:24,ease:"linear"}}),e.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center gap-6",children:[e.jsxs("div",{className:"flex-1 flex items-start gap-4",children:[e.jsxs(s.div,{animate:_?{scale:[1,1.12,1]}:{},transition:{duration:.6,ease:"easeOut"},className:"relative w-14 h-14 md:w-16 md:h-16 shrink-0 aspect-square rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(245,158,11,0.35)] ring-2 ring-amber-300/50 bg-[linear-gradient(140deg,#ffe9b0,#f9cf55,#f6b530,#f9cf55,#ffe9b0)]","aria-hidden":!0,children:[e.jsx(f,{size:28,className:"text-white drop-shadow"}),e.jsx(s.span,{className:"pointer-events-none absolute inset-0 rounded-full",initial:{opacity:.25},animate:{opacity:[.2,.45,.2]},transition:{duration:2.2,repeat:1/0}})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs uppercase tracking-widest text-slate-300/70 font-semibold",children:"Coins Balance"}),e.jsxs("div",{className:"text-[2.2rem] md:text-[2.6rem] font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-amber-200 via-yellow-200 to-orange-300 leading-tight drop-shadow-sm",children:[b(r)," ",e.jsx("span",{className:"text-base align-middle font-bold text-amber-200/90",children:"coins"})]}),e.jsx("div",{className:"mt-1 text-sm md:text-base text-slate-300/85",children:"Win quizzes, refer friends, and redeem awesome prizes."}),e.jsx("div",{className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full md:w-auto",children:[e.jsxs(l,{to:"/refer",className:"relative inline-flex w-full items-center justify-center gap-2 px-4 py-3 rounded-2xl text-sm font-bold bg-gradient-to-r from-cyan-500 via-teal-500 to-emerald-500 text-white shadow-[0_8px_22px_rgba(16,185,129,0.35)] hover:shadow-[0_12px_28px_rgba(16,185,129,0.45)] hover:scale-[1.02] active:scale-[0.98] transition border border-emerald-300/40",children:[e.jsx(y,{className:"w-4 h-4"}),"Refer & Earn"]}),e.jsxs(l,{to:"/redemptions",className:"relative inline-flex w-full items-center justify-center gap-2 px-4 py-3 rounded-2xl text-sm font-bold bg-gradient-to-r from-violet-500 via-fuchsia-500 to-pink-500 text-white shadow-[0_8px_22px_rgba(139,92,246,0.45)] hover:shadow-[0_12px_28px_rgba(139,92,246,0.55)] hover:scale-[1.02] active:scale-[0.98] transition border border-fuchsia-300/40",onMouseEnter:()=>h(t=>t+1),onClick:()=>{h(t=>t+1),z(t=>t+1)},children:[e.jsx(s.span,{className:"pointer-events-none absolute inset-0 m-auto rounded-full",initial:{width:0,height:0,opacity:.35,background:"radial-gradient(circle, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 70%)"},animate:{width:220,height:220,opacity:0},transition:{duration:.8,ease:"easeOut"}},k),e.jsx(E,{className:"w-4 h-4"}),"Redeem"]})]})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.45,delay:.08},className:"qd-card rounded-3xl p-5 md:p-6 mb-6 shadow-xl border border-white/10 bg-white/[0.03] backdrop-blur-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h3",{className:"text-base md:text-lg font-semibold bg-gradient-to-r from-cyan-200 via-emerald-200 to-amber-200 bg-clip-text text-transparent",children:"Start earning"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs(l,{to:"/",className:"group flex items-center gap-2 rounded-2xl px-4 py-2.5 bg-cyan-500/10 border border-cyan-400/30 hover:bg-cyan-500/15 transition",children:[e.jsx(W,{className:"w-4 h-4 text-cyan-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-cyan-200/90 text-xs font-semibold",children:"Play Quizzes"}),e.jsx("div",{className:"text-[11px] text-cyan-200/70",children:"Win coins every game"})]})]}),e.jsxs(l,{to:"/refer",className:"group flex items-center gap-2 rounded-2xl px-4 py-2.5 bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/15 transition",children:[e.jsx(v,{className:"w-4 h-4 text-emerald-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-emerald-200/90 text-xs font-semibold",children:"Refer Friends"}),e.jsx("div",{className:"text-[11px] text-emerald-200/70",children:"Get bonus coins"})]})]}),e.jsx("div",{className:"hidden sm:block"})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.12},className:"qd-card rounded-3xl p-6 shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-xl font-semibold bg-gradient-to-r from-indigo-200 via-fuchsia-200 to-violet-200 bg-clip-text text-transparent drop-shadow",children:"Recent Activity"})}),w?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((t,a)=>e.jsx("div",{className:"p-3 rounded-lg bg-indigo-900/40 border border-indigo-800/60 shadow-sm",children:e.jsxs("div",{className:"animate-pulse flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 w-2/3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-800/60"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-indigo-800/60 rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-2.5 bg-indigo-800/60 rounded w-1/3"})]})]}),e.jsx("div",{className:"h-3 w-16 bg-indigo-800/60 rounded"})]})},a))}):d.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸª™"}),e.jsx("p",{className:"text-slate-200 font-semibold",children:"Wallet khali hai â€” quizzes jeeto aur coins banao!"}),e.jsx("div",{className:"mt-4",children:e.jsxs(l,{to:"/refer",className:"inline-flex items-center gap-2 text-sm px-4 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition",children:[e.jsx(y,{className:"w-4 h-4"})," Refer & Earn"]})})]}):e.jsx("div",{className:"space-y-3",children:d.map((t,a)=>{const n=(t.type||"").toLowerCase(),g=x.includes(n),o=T(n),q=o.icon;return e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,scale:[.99,1]},transition:{duration:.25,delay:a*.06},className:"flex items-center justify-between p-3 bg-gradient-to-r from-indigo-900/40 via-slate-900/20 to-indigo-900/30 rounded-xl border border-indigo-700/60 hover:border-indigo-400/60 shadow-sm hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`relative w-10 h-10 rounded-full flex items-center justify-center ring-2 ${o.ring} ${o.tint}`,children:e.jsx(q,{className:"w-5 h-5 text-white/90"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`font-semibold tracking-wide text-sm leading-tight ${o.text} truncate`,children:t.type?t.type.charAt(0).toUpperCase()+t.type.slice(1):"Transaction"}),e.jsx("p",{className:"text-slate-400/80 text-[11px] font-mono",children:new Date(t.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 font-extrabold text-sm tabular-nums tracking-wide ${g?"text-emerald-300":"text-rose-300"}`,children:[g?e.jsx(A,{className:"w-4 h-4"}):e.jsx(M,{className:"w-4 h-4"}),g?"+":"-",b(Math.abs(Number(t.amount)||0)),e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-400/70 font-semibold",children:"coins"})]})]},t.id)})})]})]})]})};export{V as default};

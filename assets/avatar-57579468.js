import{s as f}from"./index-12df6380.js";const l="avatars";async function g(t,s=3600,a=f){if(!a||!t)return"";if(t.includes("://"))return t;try{const{data:r,error:n}=await a.storage.from(l).createSignedUrl(t,s);return n?(console.warn("Signed avatar URL fetch failed:",n),""):(r==null?void 0:r.signedUrl)||""}catch(r){return console.warn("Signed avatar URL fetch failed:",r),""}}async function U(t,s=3600,a=f){if(!a||!Array.isArray(t)||!t.length)return new Map;const r=new Map,n=t.filter(Boolean),d=n.filter(e=>e.includes("://"));for(const e of d)r.set(e,e);const i=Array.from(new Set(n.filter(e=>!e.includes("://"))));if(!i.length)return r;try{const{data:e,error:c}=await a.storage.from(l).createSignedUrls(i,s);if(c)return console.warn("Signed avatar URLs batch fetch failed:",c),r;for(const o of e||[])o!=null&&o.path&&r.set(o.path,o.signedUrl||"");return r}catch(e){return console.warn("Signed avatar URLs batch fetch failed:",e),new Map}}export{U as a,g};

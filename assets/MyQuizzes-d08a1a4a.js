import{a as U,u as P,h as S,s as h,b as V,c as G,j as e,m as C,B as F,f as Y,d as R,g as $}from"./index-3b26b5f7.js";import{r as b}from"./react-63c462fe.js";import{S as Z}from"./SEO-a8c0795d.js";import{a as H}from"./router-10fed1f4.js";import{L as J,P as O,d as K,T as X,e as W,f as q,g as ee,S as te}from"./icons-590232b1.js";import"./supabase-07ebd5d8.js";function se(c){const d="px-2 py-0.5 rounded-full text-xs font-semibold";return c==="active"?d+" bg-green-600/15 text-green-400 border border-green-700/40":c==="upcoming"?d+" bg-blue-600/15 text-blue-300 border border-blue-700/40":d+" bg-slate-600/20 text-slate-300 border border-slate-700/40"}const ae=({size:c=72,centered:d=!1,fitParent:p=!1})=>{const N=typeof c=="number"?`${c}px`:c,[m,u]=b.useState(0),_=["/Trophy.png","/trophy.png","/trophy-question.png","/trophy-question.webp"],k=_[m]||_[0];return e.jsx("div",{className:`relative trophy-float pointer-events-none${d?"":" mx-auto mb-4"}`,style:{width:p?"100%":N,height:p?"100%":N},children:e.jsx("div",{className:"trophy-sway w-full h-full",children:e.jsx("div",{className:"trophy-pulse w-full h-full",children:m>=0?e.jsx("img",{src:k,alt:"Trophy",className:"w-full h-full object-contain select-none",style:{backgroundColor:"transparent",display:"block",maxWidth:"96px",maxHeight:"96px"},loading:"eager",decoding:"async",sizes:"(max-width: 640px) 64px, 96px",onError:()=>{const D=m+1;D<_.length?u(D):u(-1)}}):e.jsxs("svg",{viewBox:"0 0 128 128",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet","aria-hidden":!0,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"qdTg",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffe795"}),e.jsx("stop",{offset:"45%",stopColor:"#ffd34d"}),e.jsx("stop",{offset:"75%",stopColor:"#f0a700"}),e.jsx("stop",{offset:"100%",stopColor:"#b86a00"})]}),e.jsxs("linearGradient",{id:"qdQM",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#6d28d9"}),e.jsx("stop",{offset:"100%",stopColor:"#7c3aed"})]})]}),e.jsx("path",{d:"M28 30c-10 0-18 10-16 20 2 10 14 14 24 11",fill:"none",stroke:"#f0b000",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M100 30c10 0 18 10 16 20-2 10-14 14-24 11",fill:"none",stroke:"#f0b000",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M28 22h72c0 24-10 36-26 41v9c0 7-6 13-14 13s-14-6-14-13v-9C38 58 28 46 28 22Z",fill:"url(#qdTg)"}),e.jsx("rect",{x:"56",y:"72",width:"16",height:"10",rx:"3",fill:"url(#qdTg)"}),e.jsx("rect",{x:"44",y:"82",width:"40",height:"12",rx:"4",fill:"url(#qdTg)"}),e.jsx("rect",{x:"36",y:"94",width:"56",height:"10",rx:"5",fill:"url(#qdTg)"}),e.jsx("text",{x:"64",y:"46",textAnchor:"middle",dominantBaseline:"middle",fontSize:"32",fontWeight:"900",fill:"url(#qdQM)",stroke:"#2b1a59",strokeWidth:"3",paintOrder:"stroke fill",children:"?"})]})})})})},xe=()=>{const c=H(),{user:d,userProfile:p}=U(),{toast:N}=P(),[m,u]=b.useState([]),[_,k]=b.useState(!0),[D,y]=b.useState({}),T=b.useCallback(async()=>{if(d){if(!S||!h){u([]);return}try{const{data:t,error:l}=await h.from("my_quizzes_view").select("*");if(l){console.error("Error fetching my quizzes view:",l),u([]);return}const a=(t||[]).map(i=>({...i})),n=Date.now(),r=(a||[]).filter(i=>i.end_time&&new Date(i.end_time).getTime()<=n&&(!Array.isArray(i.leaderboard)||i.leaderboard.length===0));if((V({defaultValue:!0})||(p==null?void 0:p.role)==="admin")&&r.length)try{await Promise.allSettled(r.map(o=>G(h,o.id)));const{data:i}=await h.from("my_quizzes_view").select("*"),x=(i||[]).map(o=>({...o}));u(x);return}catch(i){}u(a)}catch(t){console.error(t)}}},[d,p==null?void 0:p.role]);if(b.useEffect(()=>{if(typeof window!="undefined"&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().catch(()=>{}),!d){k(!1),u([]),y({});return}const t=(()=>{var s,i;try{const x=typeof window!="undefined"&&window.__QUIZ_DANGAL_ENV__?window.__QUIZ_DANGAL_ENV__:{},o=(i=(s={}.VITE_ENABLE_REALTIME)!=null?s:x.VITE_ENABLE_REALTIME)!=null?i:"0",w=String(o).toLowerCase();return w==="1"||w==="true"||w==="yes"}catch(x){return!1}})(),l=()=>{try{if(!t||!S||!h||!d||typeof window=="undefined"||!window.isSecureContext||!("WebSocket"in window)||navigator&&navigator.onLine===!1||document&&document.visibilityState==="hidden")return!1;const s=navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection)||null;return!(s&&(s.saveData||typeof s.effectiveType=="string"&&/(^|\b)2g(\b|$)/i.test(s.effectiveType)))}catch(s){return!0}};let a=null;if(l())try{a=h.channel("quiz-results-channel",{config:{broadcast:{ack:!0}}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"quiz_results"},()=>{if(T(),typeof window!="undefined"&&"Notification"in window&&Notification.permission==="granted")try{new Notification("Quiz Result Ready",{body:"Your quiz results are available. Tap to view."})}catch(s){}}).subscribe(s=>{}),setTimeout(()=>{try{a&&a.state!=="joined"&&h.removeChannel(a)}catch(s){}},5e3)}catch(s){}(async()=>{k(!0);try{await T()}finally{k(!1)}})();const r=setInterval(T,12e4);return()=>{try{a&&h.removeChannel(a)}catch(s){}clearInterval(r)}},[d,T]),b.useEffect(()=>{let t=null;try{const l=Date.now();(m||[]).some(n=>{const r=n.start_time?new Date(n.start_time).getTime():0,s=n.end_time?new Date(n.end_time).getTime():0;return r&&l<r||r&&s&&l>=r&&l<s})&&(t=setInterval(()=>{y(n=>({...n}))},1e3))}catch(l){}return()=>{t&&clearInterval(t)}},[m]),b.useEffect(()=>{const t=async()=>{try{if(!S||!h){y({});return}const l=Date.now(),a=(m||[]).filter(i=>i.end_time&&l<new Date(i.end_time).getTime()).map(i=>i.id);if(!a.length){y({});return}const{data:n,error:r}=await h.rpc("get_engagement_counts_many",{p_quiz_ids:a});if(r)throw r;const s={};for(const i of n||[]){const x=i.pre_joined||0,o=i.joined||0;s[i.quiz_id]=x+o}y(s)}catch(l){y({})}};m&&m.length&&t()},[m]),_)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(J,{className:"h-12 w-12 animate-spin text-indigo-300"})});if(m.length===0)return e.jsx("div",{className:"min-h-screen overflow-x-hidden",children:e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"container mx-auto h-full px-4",children:e.jsx("div",{className:"h-full flex items-start justify-center pt-20",children:e.jsxs(C.div,{initial:{opacity:0},animate:{opacity:1},className:"relative text-center text-slate-100 p-2",children:[e.jsx("div",{className:"pointer-events-none absolute -top-16 -left-16 w-44 h-44 rounded-full bg-indigo-600/10 blur-3xl"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-16 -right-16 w-44 h-44 rounded-full bg-fuchsia-600/10 blur-3xl"}),e.jsx("h1",{className:"text-2xl font-bold heading-gradient text-shadow mb-4",children:"My Quizzes"}),e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.06},className:"relative max-w-md mx-auto rounded-3xl p-[2px] bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-rose-500 shadow-[0_30px_80px_-20px_rgba(99,102,241,0.25)]",children:e.jsxs("div",{className:"rounded-3xl bg-slate-950/80 backdrop-blur border border-white/10 px-6 py-9",children:[e.jsx("div",{className:"mx-auto mb-4 w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full p-[2px] bg-gradient-to-b from-amber-400 to-amber-600",children:e.jsx("div",{className:"w-full h-full rounded-full grid place-items-center bg-slate-950/90 p-1 sm:p-1.5 md:p-2",children:e.jsx(ae,{centered:!0,fitParent:!0})})}),e.jsx("h3",{className:"text-xl font-extrabold bg-gradient-to-r from-white to-slate-200 bg-clip-text text-transparent",children:"No Quizzes Yet"}),e.jsx("p",{className:"mt-2 text-sm text-slate-300",children:"Kickstart your journey—join your first quiz and build your streak!"}),e.jsxs("div",{className:"mt-5 flex flex-wrap items-center justify-center gap-2 text-[11px]",children:[e.jsx("span",{className:"px-2.5 py-1 rounded-full border border-indigo-500/40 bg-indigo-500/10 text-indigo-200",children:"Daily quizzes"}),e.jsx("span",{className:"px-2.5 py-1 rounded-full border border-fuchsia-500/40 bg-fuchsia-500/10 text-fuchsia-200",children:"Win coins"}),e.jsx("span",{className:"px-2.5 py-1 rounded-full border border-emerald-500/40 bg-emerald-500/10 text-emerald-200",children:"Leaderboards"})]}),e.jsx("div",{className:"mt-7",children:e.jsxs(F,{onClick:()=>c("/"),variant:"brand",className:"w-full rounded-xl py-3 text-sm font-extrabold shadow-[0_14px_30px_rgba(139,92,246,0.35)] hover:shadow-[0_18px_42px_rgba(139,92,246,0.5)] hover:scale-[1.01] active:scale-[0.99] transition",children:[e.jsx(O,{className:"w-5 h-5 mr-2"})," Explore Quizzes"]})})]})})]})})})})});const g=Date.now(),A=m.filter(t=>t.end_time&&g<new Date(t.end_time).getTime()),B=m.filter(t=>t.end_time&&g>=new Date(t.end_time).getTime()).sort((t,l)=>{const a=t.end_time?new Date(t.end_time).getTime():0;return(l.end_time?new Date(l.end_time).getTime():0)-a}).slice(0,5);return A.sort((t,l)=>{const a=t.start_time?new Date(t.start_time).getTime():0,n=t.end_time?new Date(t.end_time).getTime():0,r=l.start_time?new Date(l.start_time).getTime():0,s=l.end_time?new Date(l.end_time).getTime():0,i=a&&n&&g>=a&&g<n,x=r&&s&&g>=r&&g<s;return i!==x?i?-1:1:a-r}),e.jsxs("div",{className:"min-h-screen overflow-x-hidden",children:[e.jsx(Z,{title:"My Quizzes – Quiz Dangal",description:"Track the quizzes you have joined, monitor live rounds, and revisit completed contests on Quiz Dangal.",canonical:"https://quizdangal.com/my-quizzes/",robots:"noindex, nofollow"}),e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs(C.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"overflow-hidden",children:[e.jsx("h1",{className:"text-2xl font-bold heading-gradient text-shadow mb-4 text-center",children:"My Quizzes"}),A.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Live/Upcoming"}),e.jsx("div",{className:"space-y-3",children:A.map((t,l)=>{var f,I,Q;const a=t.start_time?new Date(t.start_time):null,n=t.end_time?new Date(t.end_time):null,r=a&&n&&g>=a.getTime()&&g<n.getTime(),s=r?Math.max(0,Math.floor((n.getTime()-Date.now())/1e3)):a?Math.max(0,Math.floor((a.getTime()-Date.now())/1e3)):0,i=a&&n?Math.max(1,n.getTime()-a.getTime()):null,x=r&&i?Math.min(100,Math.max(0,Math.round((Date.now()-a.getTime())/i*100))):null,o=Array.isArray(t.prizes)?t.prizes:[],w=t.prize_type||"coins",E=(f=o[0])!=null?f:0,L=(I=o[1])!=null?I:0,z=(Q=o[2])!=null?Q:0,j=M=>$(w,M,{fallback:0}).formatted,v=D[t.id]||0;return e.jsxs(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.05},onClick:()=>c(`/quiz/${t.id}`),className:`relative overflow-hidden rounded-2xl border ${r?"border-emerald-700/50":"border-slate-800"} bg-gradient-to-br from-slate-950/90 via-slate-900/85 to-slate-900/60 shadow-xl cursor-pointer group hover:-translate-y-0.5 transition-transform qd-card p-4 sm:p-5`,children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(1200px 300px at -10% -10%, rgba(99,102,241,0.06), transparent), radial-gradient(900px 200px at 110% 20%, rgba(16,185,129,0.05), transparent)"}}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 flex gap-2",children:[r&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-extrabold tracking-widest bg-rose-600 text-white ring-1 ring-rose-300/50 shadow",children:"LIVE"}),!r&&a&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-extrabold tracking-widest bg-sky-600 text-white ring-1 ring-sky-300/50 shadow",children:"SOON"})]}),e.jsx("div",{className:"flex items-center justify-between gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"truncate font-semibold text-slate-100 text-base sm:text-lg",children:t.title}),e.jsx("span",{className:se(r?"active":"upcoming"),children:r?"active":"upcoming"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-semibold border ${r?"bg-emerald-500/15 text-emerald-300 border-emerald-700/40":"bg-indigo-500/15 text-indigo-300 border-indigo-700/40"}`,children:"Joined"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-amber-500/20 to-amber-400/10 text-amber-200 border border-amber-500/30 shadow-sm",children:["🥇 ",j(E)]}),e.jsxs("span",{className:"px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-sky-500/20 to-sky-400/10 text-sky-200 border border-sky-500/30 shadow-sm",children:["🥈 ",j(L)]}),e.jsxs("span",{className:"px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-violet-500/20 to-violet-400/10 text-violet-200 border border-violet-500/30 shadow-sm",children:["🥉 ",j(z)]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-[11px] text-slate-400",children:t.start_time?Y(t.start_time):"—"}),e.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2 text-[11px] text-slate-300",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-md px-2 py-1",children:[e.jsx("span",{className:"uppercase text-[9px] text-slate-400",children:"Start"}),e.jsx("div",{children:t.start_time?R(t.start_time):"—"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-md px-2 py-1",children:[e.jsx("span",{className:"uppercase text-[9px] text-slate-400",children:"End"}),e.jsx("div",{children:t.end_time?R(t.end_time):"—"})]})]})]}),s!==null&&e.jsxs("div",{className:"mt-2 text-sm font-semibold text-indigo-300",children:[r?"Ends in":"Starts in"," ",String(Math.floor(s/60)).padStart(2,"0"),":",String(s%60).padStart(2,"0")]}),e.jsx("div",{className:"mt-1 flex items-center gap-4 text-xs text-slate-400",children:e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(K,{className:"w-3.5 h-3.5 mr-1"}),v," joined"]})}),x!==null&&e.jsx("div",{className:"mt-2 w-full bg-slate-800/50 border border-slate-700/70 rounded-full h-1 overflow-hidden",children:e.jsx("div",{className:"h-1 bg-emerald-500/80",style:{width:`${x}%`}})})]})}),e.jsx("div",{className:"mt-3 flex",children:e.jsx("button",{onClick:M=>{M.stopPropagation(),c(`/quiz/${t.id}`)},className:"relative w-full px-4 py-2.5 rounded-lg text-sm sm:text-base font-extrabold border border-violet-500/40 text-white shadow-[0_8px_18px_rgba(139,92,246,0.4)] hover:shadow-[0_12px_24px_rgba(139,92,246,0.55)] hover:scale-[1.015] active:scale-[0.99] transition focus:outline-none focus:ring-2 focus:ring-fuchsia-300 bg-[linear-gradient(90deg,#4f46e5,#7c3aed,#9333ea,#c026d3)] overflow-hidden",children:e.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"})," PLAY"]})})})]},`lu-${t.id}`)})})]}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Finished"}),e.jsx("div",{className:"space-y-2.5",children:B.map((t,l)=>{var z,j;const a=new Date,n=new Date(t.end_time),r=n.toLocaleString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}),s=Array.isArray(t.leaderboard)?t.leaderboard:[],i=a>=n&&s.length>0,x=a>=n,o=i?s.find(v=>v.user_id===(d==null?void 0:d.id)):null,w=t.prize_type&&String(t.prize_type).trim()?t.prize_type:"coins",E=o!=null&&o.rank&&Array.isArray(t.prizes)?t.prizes[o.rank-1]:null,L=o!=null&&o.rank?$(w,E!=null?E:0,{fallback:0}).formatted:"—";return e.jsxs(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.06},onClick:()=>c(`/results/${t.id}`),className:"qd-card relative overflow-hidden rounded-2xl border border-slate-800/70 bg-slate-950/80 p-3 sm:p-3.5 text-slate-100 cursor-pointer group shadow-[0_14px_34px_-22px_rgba(99,102,241,0.6)] backdrop-blur-[2px] hover:-translate-y-1 hover:border-slate-700/70 transition-transform",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 opacity-70 mix-blend-screen [background-image:radial-gradient(circle_at_12%_24%,rgba(99,102,241,0.22),rgba(0,0,0,0)55%),radial-gradient(circle_at_82%_76%,rgba(236,72,153,0.18),rgba(0,0,0,0)60%),radial-gradient(circle_at_50%_0%,rgba(45,212,191,0.14),rgba(0,0,0,0)58%)]"}),e.jsx("div",{className:"pointer-events-none absolute -top-16 right-[-20%] h-36 w-36 rounded-full bg-fuchsia-500/12 blur-3xl"}),e.jsxs("div",{className:"relative flex flex-col gap-2.5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2.5",children:[e.jsxs("div",{className:"flex items-start gap-2.5 min-w-0 w-full",children:[e.jsxs("span",{className:"relative shrink-0 inline-flex h-10 w-10 sm:h-9 sm:w-9 items-center justify-center rounded-2xl bg-gradient-to-br from-amber-400/25 via-fuchsia-500/22 to-indigo-500/25 ring-1 ring-amber-300/40 text-amber-200 shadow-[0_10px_20px_rgba(147,51,234,0.3)]",children:[e.jsx("span",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-white/6 via-transparent to-transparent","aria-hidden":!0}),i?e.jsx(X,{className:"relative w-[18px] h-[18px]",strokeWidth:2.3}):e.jsx(W,{className:"relative w-[18px] h-[18px]",strokeWidth:2.1})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-white pr-2 break-words line-clamp-2",children:t.title}),e.jsxs("p",{className:"mt-0.5 text-[10px] sm:text-xs text-slate-400 leading-tight",children:["Ended ",r]})]})]}),e.jsx("button",{onClick:v=>{v.stopPropagation(),c(`/results/${t.id}`)},className:"shrink-0 rounded-full border border-violet-500/40 bg-[linear-gradient(90deg,#4f46e5,#7c3aed,#9333ea)] px-3 py-1.5 text-[11px] sm:text-xs font-semibold text-white transition focus:outline-none focus:ring-2 focus:ring-fuchsia-300/60 hover:scale-[1.03] active:scale-[0.98] shadow-[0_8px_20px_rgba(139,92,246,0.4)]",children:"Result"})]}),i?e.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px] sm:text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between gap-1.5 rounded-xl border border-indigo-500/35 bg-indigo-500/12 px-2.5 py-1.5 min-w-0",children:[e.jsx(q,{className:"h-4 w-4 text-indigo-200 shrink-0"}),e.jsxs("div",{className:"text-right leading-tight min-w-0",children:[e.jsx("div",{className:"uppercase text-[9px] tracking-wider text-slate-400",children:"Rank"}),e.jsxs("div",{className:"font-semibold text-indigo-100 truncate",children:["#",(z=o==null?void 0:o.rank)!=null?z:"-"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-1.5 rounded-xl border border-sky-500/35 bg-sky-500/12 px-2.5 py-1.5 min-w-0",children:[e.jsx(ee,{className:"h-4 w-4 text-sky-200 shrink-0"}),e.jsxs("div",{className:"text-right leading-tight min-w-0",children:[e.jsx("div",{className:"uppercase text-[9px] tracking-wider text-slate-400",children:"Score"}),e.jsx("div",{className:"font-semibold text-sky-100 truncate",children:(j=o==null?void 0:o.score)!=null?j:"-"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-1.5 rounded-xl border border-fuchsia-500/40 bg-fuchsia-500/12 px-2.5 py-1.5 min-w-0",children:[e.jsx(te,{className:"h-4 w-4 text-fuchsia-200 shrink-0"}),e.jsxs("div",{className:"text-right leading-tight min-w-0",children:[e.jsx("div",{className:"uppercase text-[9px] tracking-wider text-slate-400",children:"Prize"}),e.jsx("div",{className:"font-semibold text-fuchsia-100 truncate",children:L})]})]})]}):e.jsxs("div",{className:"flex items-center justify-between gap-2 rounded-xl border border-slate-800/70 bg-slate-900/65 px-3 py-2 text-[11px] sm:text-xs text-slate-300",children:[e.jsx(W,{className:"h-4 w-4 text-indigo-200"}),x?e.jsx("span",{className:"flex-1 leading-tight",children:"Finalized. No participants or valid answers."}):e.jsxs("span",{className:"flex-1 leading-tight",children:["Results will be declared at ",n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(p==null?void 0:p.role)==="admin"&&S&&h&&!x&&e.jsx("button",{onClick:async v=>{v.stopPropagation();try{const{error:f}=await h.rpc("admin_recompute_quiz_results",{p_quiz_id:t.id});if(f)throw f;N({title:"Recompute triggered",description:"Results recompute requested."}),await T()}catch(f){N({title:"Recompute failed",description:(f==null?void 0:f.message)||"Could not recompute.",variant:"destructive"})}},className:"rounded-lg border border-fuchsia-500/40 bg-fuchsia-500/10 px-2 py-1 text-[10px] font-semibold uppercase tracking-wide text-fuchsia-200 transition hover:bg-fuchsia-500/20",title:"Admin only",children:"Recompute"})]})]})]},t.id)})})]})})]})};export{xe as default};
